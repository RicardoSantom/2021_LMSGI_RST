var MarkCollector=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=Math.ceil,a=Math.floor,n=function(e){return isNaN(e=+e)?0:(e>0?a:i)(e)},r=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},o=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),c=t(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),s=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},l=function(e,t,i){if(s(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,a){return e.call(t,i,a)};case 3:return function(i,a,n){return e.call(t,i,a,n)}}return function(){return e.apply(t,arguments)}},u=function(e){return"object"==typeof e?null!==e:"function"==typeof e},d=function(e){if(!u(e))throw TypeError(e+" is not an object!");return e},v=function(e){try{return!!e()}catch(e){return!0}},p=!v(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g=o.document,f=u(g)&&u(g.createElement),y=function(e){return f?g.createElement(e):{}},h=!p&&!v(function(){return 7!=Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a}),m=Object.defineProperty,T={f:p?Object.defineProperty:function(e,t,i){if(d(e),t=function(e,t){if(!u(e))return e;var i,a;if(t&&"function"==typeof(i=e.toString)&&!u(a=i.call(e)))return a;if("function"==typeof(i=e.valueOf)&&!u(a=i.call(e)))return a;if(!t&&"function"==typeof(i=e.toString)&&!u(a=i.call(e)))return a;throw TypeError("Can't convert object to primitive value")}(t,!0),d(i),h)try{return m(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},k=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},A=p?function(e,t,i){return T.f(e,t,k(1,i))}:function(e,t,i){return e[t]=i,e},w={}.hasOwnProperty,S=function(e,t){return w.call(e,t)},I=function(e,t,i){var a,n,r,s=e&I.F,u=e&I.G,d=e&I.S,v=e&I.P,p=e&I.B,g=e&I.W,f=u?c:c[t]||(c[t]={}),y=f.prototype,h=u?o:d?o[t]:(o[t]||{}).prototype;for(a in u&&(i=t),i)(n=!s&&h&&void 0!==h[a])&&S(f,a)||(r=n?h[a]:i[a],f[a]=u&&"function"!=typeof h[a]?i[a]:p&&n?l(r,o):g&&h[a]==r?function(e){var t=function(t,i,a){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,a)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(r):v&&"function"==typeof r?l(Function.call,r):r,v&&((f.virtual||(f.virtual={}))[a]=r,e&I.R&&y&&!y[a]&&A(y,a,r)))};I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;var C,N=I,b=A,P={},M={}.toString,E=function(e){return M.call(e).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==E(e)?e.split(""):Object(e)},_=function(e){return D(r(e))},x=Math.min,O=function(e){return e>0?x(n(e),9007199254740991):0},L=Math.max,V=Math.min,R=o["__core-js_shared__"]||(o["__core-js_shared__"]={}),F=function(e){return R[e]||(R[e]={})},j=0,B=Math.random(),U=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++j+B).toString(36))},G=F("keys"),H=function(e){return G[e]||(G[e]=U(e))},Y=(C=!1,function(e,t,i){var a,r=_(e),o=O(r.length),c=function(e,t){return(e=n(e))<0?L(e+t,0):V(e,t)}(i,o);if(C&&t!=t){for(;o>c;)if((a=r[c++])!=a)return!0}else for(;o>c;c++)if((C||c in r)&&r[c]===t)return C||c||0;return!C&&-1}),q=H("IE_PROTO"),z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=Object.keys||function(e){return function(e,t){var i,a=_(e),n=0,r=[];for(i in a)i!=q&&S(a,i)&&r.push(i);for(;t.length>n;)S(a,i=t[n++])&&(~Y(r,i)||r.push(i));return r}(e,z)},W=p?Object.defineProperties:function(e,t){d(e);for(var i,a=J(t),n=a.length,r=0;n>r;)T.f(e,i=a[r++],t[i]);return e},K=o.document,Z=K&&K.documentElement,X=H("IE_PROTO"),$=function(){},Q=function(){var e,t=y("iframe"),i=z.length;for(t.style.display="none",Z.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Q=e.F;i--;)delete Q.prototype[z[i]];return Q()},ee=Object.create||function(e,t){var i;return null!==e?($.prototype=d(e),i=new $,$.prototype=null,i[X]=e):i=Q(),void 0===t?i:W(i,t)},te=t(function(e){var t=F("wks"),i=o.Symbol,a="function"==typeof i;(e.exports=function(e){return t[e]||(t[e]=a&&i[e]||(a?i:U)("Symbol."+e))}).store=t}),ie=T.f,ae=te("toStringTag"),ne=function(e,t,i){e&&!S(e=i?e:e.prototype,ae)&&ie(e,ae,{configurable:!0,value:t})},re={};A(re,te("iterator"),function(){return this});var oe,ce=function(e,t,i){e.prototype=ee(re,{next:k(1,i)}),ne(e,t+" Iterator")},se=function(e){return Object(r(e))},le=H("IE_PROTO"),ue=Object.prototype,de=Object.getPrototypeOf||function(e){return e=se(e),S(e,le)?e[le]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ue:null},ve=te("iterator"),pe=!([].keys&&"next"in[].keys()),ge=function(){return this},fe=function(e,t,i,a,n,r,o){ce(i,t,a);var c,s,l,u=function(e){if(!pe&&e in g)return g[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},d=t+" Iterator",v="values"==n,p=!1,g=e.prototype,f=g[ve]||g["@@iterator"]||n&&g[n],y=f||u(n),h=n?v?u("entries"):y:void 0,m="Array"==t&&g.entries||f;if(m&&(l=de(m.call(new e)))!==Object.prototype&&l.next&&ne(l,d,!0),v&&f&&"values"!==f.name&&(p=!0,y=function(){return f.call(this)}),o&&(pe||p||!g[ve])&&A(g,ve,y),P[t]=y,P[d]=ge,n)if(c={values:v?y:u("values"),keys:r?y:u("keys"),entries:h},o)for(s in c)s in g||b(g,s,c[s]);else N(N.P+N.F*(pe||p),t,c);return c},ye=(oe=!0,function(e,t){var i,a,o=String(r(e)),c=n(t),s=o.length;return c<0||c>=s?oe?"":void 0:(i=o.charCodeAt(c))<55296||i>56319||c+1===s||(a=o.charCodeAt(c+1))<56320||a>57343?oe?o.charAt(c):i:oe?o.slice(c,c+2):a-56320+(i-55296<<10)+65536});fe(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=ye(t,i),this._i+=e.length,{value:e,done:!1})});var he=function(e,t){return{value:t,done:!!e}};fe(Array,"Array",function(e,t){this._t=_(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,he(1)):he(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values");P.Arguments=P.Array;for(var me=te("toStringTag"),Te="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),ke=0;ke<Te.length;ke++){var Ae=Te[ke],we=o[Ae],Se=we&&we.prototype;Se&&!Se[me]&&A(Se,me,Ae),P[Ae]=P.Array}var Ie,Ce,Ne,be,Pe,Me,Ee,De,_e,xe=function(e,t,i){for(var a in t)i&&e[a]?e[a]=t[a]:A(e,a,t[a]);return e},Oe=function(e,t,i,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(i+": incorrect invocation!");return e},Le=function(e,t,i,a){try{return a?t(d(i)[0],i[1]):t(i)}catch(t){var n=e.return;throw void 0!==n&&d(n.call(e)),t}},Ve=te("iterator"),Re=Array.prototype,Fe=te("toStringTag"),je="Arguments"==E(function(){return arguments}()),Be=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Fe))?i:je?E(t):"Object"==(a=E(t))&&"function"==typeof t.callee?"Arguments":a},Ue=te("iterator"),Ge=c.getIteratorMethod=function(e){if(void 0!=e)return e[Ue]||e["@@iterator"]||P[Be(e)]},He=t(function(e){var t={},i={},a=e.exports=function(e,a,n,r,o){var c,s,u,v,p,g=o?function(){return e}:Ge(e),f=l(n,r,a?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(void 0===(p=g)||P.Array!==p&&Re[Ve]!==p){for(u=g.call(e);!(s=u.next()).done;)if((v=Le(u,f,s.value,a))===t||v===i)return v}else for(c=O(e.length);c>y;y++)if((v=a?f(d(s=e[y])[0],s[1]):f(e[y]))===t||v===i)return v};a.BREAK=t,a.RETURN=i}),Ye=te("species"),qe=function(e){var t="function"==typeof c[e]?c[e]:o[e];p&&t&&!t[Ye]&&T.f(t,Ye,{configurable:!0,get:function(){return this}})},ze=t(function(e){var t=U("meta"),i=T.f,a=0,n=Object.isExtensible||function(){return!0},r=!v(function(){return n(Object.preventExtensions({}))}),o=function(e){i(e,t,{value:{i:"O"+ ++a,w:{}}})},c=e.exports={KEY:t,NEED:!1,fastKey:function(e,i){if(!u(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!S(e,t)){if(!n(e))return"F";if(!i)return"E";o(e)}return e[t].i},getWeak:function(e,i){if(!S(e,t)){if(!n(e))return!0;if(!i)return!1;o(e)}return e[t].w},onFreeze:function(e){return r&&c.NEED&&n(e)&&!S(e,t)&&o(e),e}}}),Je=function(e,t){if(!u(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},We=T.f,Ke=ze.fastKey,Ze=p?"_s":"size",Xe=function(e,t){var i,a=Ke(t);if("F"!==a)return e._i[a];for(i=e._f;i;i=i.n)if(i.k==t)return i},$e={getConstructor:function(e,t,i,a){var n=e(function(e,r){Oe(e,n,t,"_i"),e._t=t,e._i=ee(null),e._f=void 0,e._l=void 0,e[Ze]=0,void 0!=r&&He(r,i,e[a],e)});return xe(n.prototype,{clear:function(){for(var e=Je(this,t),i=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];e._f=e._l=void 0,e[Ze]=0},delete:function(e){var i=Je(this,t),a=Xe(i,e);if(a){var n=a.n,r=a.p;delete i._i[a.i],a.r=!0,r&&(r.n=n),n&&(n.p=r),i._f==a&&(i._f=n),i._l==a&&(i._l=r),i[Ze]--}return!!a},forEach:function(e){Je(this,t);for(var i,a=l(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(a(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!Xe(Je(this,t),e)}}),p&&We(n.prototype,"size",{get:function(){return Je(this,t)[Ze]}}),n},def:function(e,t,i){var a,n,r=Xe(e,t);return r?r.v=i:(e._l=r={i:n=Ke(t,!0),k:t,v:i,p:a=e._l,n:void 0,r:!1},e._f||(e._f=r),a&&(a.n=r),e[Ze]++,"F"!==n&&(e._i[n]=r)),e},getEntry:Xe,setStrong:function(e,t,i){fe(e,t,function(e,i){this._t=Je(e,t),this._k=i,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?he(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,he(1))},i?"entries":"values",!i,!0),qe(t)}},Qe=Array.isArray||function(e){return"Array"==E(e)},et=te("species"),tt=function(e,t){return new(function(e){var t;return Qe(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Qe(t.prototype)||(t=void 0),u(t)&&null===(t=t[et])&&(t=void 0)),void 0===t?Array:t}(e))(t)},it=T.f,at=(Ne=1==(Ie=0),be=2==Ie,Pe=3==Ie,Me=4==Ie,Ee=6==Ie,De=5==Ie||Ee,_e=Ce||tt,function(e,t,i){for(var a,n,r=se(e),o=D(r),c=l(t,i,3),s=O(o.length),u=0,d=Ne?_e(e,s):be?_e(e,0):void 0;s>u;u++)if((De||u in o)&&(n=c(a=o[u],u,r),Ie))if(Ne)d[u]=n;else if(n)switch(Ie){case 3:return!0;case 5:return a;case 6:return u;case 2:d.push(a)}else if(Me)return!1;return Ee?-1:Pe||Me?Me:d});!function(e,t,i,a,n,r){var c=o[e],s=c,l=n?"set":"add",d=s&&s.prototype,g={};p&&"function"==typeof s&&(r||d.forEach&&!v(function(){(new s).entries().next()}))?(s=t(function(t,i){Oe(t,s,e,"_c"),t._c=new c,void 0!=i&&He(i,n,t[l],t)}),at("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in d&&(!r||"clear"!=e)&&A(s.prototype,e,function(i,a){if(Oe(this,s,e),!t&&r&&!u(i))return"get"==e&&void 0;var n=this._c[e](0===i?0:i,a);return t?this:n})}),r||it(s.prototype,"size",{get:function(){return this._c.size}})):(s=a.getConstructor(t,e,n,l),xe(s.prototype,i),ze.NEED=!0),ne(s,e),g[e]=s,N(N.G+N.W+N.F,g),r||a.setStrong(s,e,n)}("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=$e.getEntry(Je(this,"Map"),e);return t&&t.v},set:function(e,t){return $e.def(Je(this,"Map"),0===e?0:e,t)}},$e,!0);N(N.P+N.R,"Map",{toJSON:function(e){return function(){if(Be(this)!=e)throw TypeError(e+"#toJSON isn't generic");return He(this,!1,(i=[]).push,i,t),i;var t,i}}("Map")});var nt;nt="Map",N(N.S,nt,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}});!function(e){N(N.S,e,{from:function(e){var t,i,a,n,r=arguments[1];return s(this),(t=void 0!==r)&&s(r),void 0==e?new this:(i=[],t?(a=0,n=l(r,arguments[2],2),He(e,!1,function(e){i.push(n(e,a++))})):He(e,!1,i.push,i),new this(i))}})}("Map");var rt,ot,ct,st=c.Map,lt=e(t(function(e){e.exports={default:st,__esModule:!0}})),ut=te("species"),dt=function(e,t){var i,a=d(e).constructor;return void 0===a||void 0==(i=d(a)[ut])?t:s(i)},vt=o.process,pt=o.setImmediate,gt=o.clearImmediate,ft=o.MessageChannel,yt=o.Dispatch,ht=0,mt={},Tt=function(){var e=+this;if(mt.hasOwnProperty(e)){var t=mt[e];delete mt[e],t()}},kt=function(e){Tt.call(e.data)};pt&&gt||(pt=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return mt[++ht]=function(){!function(e,t,i){var a=void 0===i;switch(t.length){case 0:return a?e():e.call(i);case 1:return a?e(t[0]):e.call(i,t[0]);case 2:return a?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}e.apply(i,t)}("function"==typeof e?e:Function(e),t)},rt(ht),ht},gt=function(e){delete mt[e]},"process"==E(vt)?rt=function(e){vt.nextTick(l(Tt,e,1))}:yt&&yt.now?rt=function(e){yt.now(l(Tt,e,1))}:ft?(ct=(ot=new ft).port2,ot.port1.onmessage=kt,rt=l(ct.postMessage,ct,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts?(rt=function(e){o.postMessage(e+"","*")},o.addEventListener("message",kt,!1)):rt="onreadystatechange"in y("script")?function(e){Z.appendChild(y("script")).onreadystatechange=function(){Z.removeChild(this),Tt.call(e)}}:function(e){setTimeout(l(Tt,e,1),0)});var At={set:pt,clear:gt},wt=At.set,St=o.MutationObserver||o.WebKitMutationObserver,It=o.process,Ct=o.Promise,Nt="process"==E(It);var bt={f:function(e){return new function(e){var t,i;this.promise=new e(function(e,a){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=a}),this.resolve=s(t),this.reject=s(i)}(e)}},Pt=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Mt=function(e,t){if(d(e),u(t)&&t.constructor===e)return t;var i=bt.f(e);return(0,i.resolve)(t),i.promise},Et=te("iterator"),Dt=!1;try{var _t=[7][Et]();_t.return=function(){Dt=!0},Array.from(_t,function(){throw 2})}catch(e){}var xt,Ot,Lt,Vt,Rt=At.set,Ft=function(){var e,t,i,a=function(){var a,n;for(Nt&&(a=It.domain)&&a.exit();e;){n=e.fn,e=e.next;try{n()}catch(a){throw e?i():t=void 0,a}}t=void 0,a&&a.enter()};if(Nt)i=function(){It.nextTick(a)};else if(!St||o.navigator&&o.navigator.standalone)if(Ct&&Ct.resolve){var n=Ct.resolve();i=function(){n.then(a)}}else i=function(){wt.call(o,a)};else{var r=!0,c=document.createTextNode("");new St(a).observe(c,{characterData:!0}),i=function(){c.data=r=!r}}return function(a){var n={fn:a,next:void 0};t&&(t.next=n),e||(e=n,i()),t=n}}(),jt=o.TypeError,Bt=o.process,Ut=o.Promise,Gt="process"==Be(Bt),Ht=function(){},Yt=Ot=bt.f,qt=!!function(){try{var e=Ut.resolve(1),t=(e.constructor={})[te("species")]=function(e){e(Ht,Ht)};return(Gt||"function"==typeof PromiseRejectionEvent)&&e.then(Ht)instanceof t}catch(e){}}(),zt=function(e){var t;return!(!u(e)||"function"!=typeof(t=e.then))&&t},Jt=function(e,t){if(!e._n){e._n=!0;var i=e._c;Ft(function(){for(var a=e._v,n=1==e._s,r=0,o=function(t){var i,r,o,c=n?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{c?(n||(2==e._h&&Zt(e),e._h=1),!0===c?i=a:(u&&u.enter(),i=c(a),u&&(u.exit(),o=!0)),i===t.promise?l(jt("Promise-chain cycle")):(r=zt(i))?r.call(i,s,l):s(i)):l(a)}catch(e){u&&!o&&u.exit(),l(e)}};i.length>r;)o(i[r++]);e._c=[],e._n=!1,t&&!e._h&&Wt(e)})}},Wt=function(e){Rt.call(o,function(){var t,i,a,n=e._v,r=Kt(e);if(r&&(t=Pt(function(){Gt?Bt.emit("unhandledRejection",n,e):(i=o.onunhandledrejection)?i({promise:e,reason:n}):(a=o.console)&&a.error&&a.error("Unhandled promise rejection",n)}),e._h=Gt||Kt(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},Kt=function(e){return 1!==e._h&&0===(e._a||e._c).length},Zt=function(e){Rt.call(o,function(){var t;Gt?Bt.emit("rejectionHandled",e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})})},Xt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Jt(t,!0))},$t=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw jt("Promise can't be resolved itself");(t=zt(e))?Ft(function(){var a={_w:i,_d:!1};try{t.call(e,l($t,a,1),l(Xt,a,1))}catch(e){Xt.call(a,e)}}):(i._v=e,i._s=1,Jt(i,!1))}catch(e){Xt.call({_w:i,_d:!1},e)}}};qt||(Ut=function(e){Oe(this,Ut,"Promise","_h"),s(e),xt.call(this);try{e(l($t,this,1),l(Xt,this,1))}catch(e){Xt.call(this,e)}},(xt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=xe(Ut.prototype,{then:function(e,t){var i=Yt(dt(this,Ut));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=Gt?Bt.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&Jt(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),Lt=function(){var e=new xt;this.promise=e,this.resolve=l($t,e,1),this.reject=l(Xt,e,1)},bt.f=Yt=function(e){return e===Ut||e===Vt?new Lt(e):Ot(e)}),N(N.G+N.W+N.F*!qt,{Promise:Ut}),ne(Ut,"Promise"),qe("Promise"),Vt=c.Promise,N(N.S+N.F*!qt,"Promise",{reject:function(e){var t=Yt(this);return(0,t.reject)(e),t.promise}}),N(N.S+!0*N.F,"Promise",{resolve:function(e){return Mt(this===Vt?Ut:this,e)}}),N(N.S+N.F*!(qt&&function(e,t){if(!t&&!Dt)return!1;var i=!1;try{var a=[7],n=a[Et]();n.next=function(){return{done:i=!0}},a[Et]=function(){return n},e(a)}catch(e){}return i}(function(e){Ut.all(e).catch(Ht)})),"Promise",{all:function(e){var t=this,i=Yt(t),a=i.resolve,n=i.reject,r=Pt(function(){var i=[],r=0,o=1;He(e,!1,function(e){var c=r++,s=!1;i.push(void 0),o++,t.resolve(e).then(function(e){s||(s=!0,i[c]=e,--o||a(i))},n)}),--o||a(i)});return r.e&&n(r.v),i.promise},race:function(e){var t=this,i=Yt(t),a=i.reject,n=Pt(function(){He(e,!1,function(e){t.resolve(e).then(i.resolve,a)})});return n.e&&a(n.v),i.promise}}),N(N.P+N.R,"Promise",{finally:function(e){var t=dt(this,c.Promise||o.Promise),i="function"==typeof e;return this.then(i?function(i){return Mt(t,e()).then(function(){return i})}:e,i?function(i){return Mt(t,e()).then(function(){throw i})}:e)}}),N(N.S,"Promise",{try:function(e){var t=bt.f(this),i=Pt(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}});var Qt=c.Promise,ei=e(t(function(e){e.exports={default:Qt,__esModule:!0}})),ti=Math.floor;N(N.S,"Number",{isInteger:function(e){return!u(e)&&isFinite(e)&&ti(e)===e}});var ii=c.Number.isInteger,ai=e(t(function(e){e.exports={default:ii,__esModule:!0}})),ni=function(e,t){var i=(c.Object||{})[e]||Object[e],a={};a[e]=t(i),N(N.S+N.F*v(function(){i(1)}),"Object",a)};ni("getPrototypeOf",function(){return function(e){return de(se(e))}});var ri=c.Object.getPrototypeOf,oi=e(t(function(e){e.exports={default:ri,__esModule:!0}})),ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},si=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},li=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),ui=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},di=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},vi={},pi=[],gi=new lt,fi=null,yi=null,hi=null,mi=null,Ti=null,ki=null,Ai=null,wi=null,Si=null,Ii=null,Ci=null,Ni=null,bi=null,Pi=null,Mi=null,Ei=null,Di=function(){function e(){si(this,e)}return li(e,null,[{key:"viewContext",get:function(){return vi},set:function(e){vi=e}},{key:"activeTags",get:function(){return pi},set:function(e){pi=e}},{key:"scheduledActiveTagTasks",get:function(){return gi},set:function(e){gi=e}},{key:"dataSetId",get:function(){return fi},set:function(e){fi=e}},{key:"viewName",get:function(){return yi},set:function(e){yi=e}},{key:"appName",get:function(){return hi},set:function(e){hi=e}},{key:"coordinates",get:function(){return mi},set:function(e){mi=e}},{key:"pageUrl",get:function(){return Ti},set:function(e){Ti=e}},{key:"pageTitle",get:function(){return ki},set:function(e){ki=e}},{key:"deviceResolution",get:function(){return Ai},set:function(e){Ai=e}},{key:"deviceId",get:function(){return wi},set:function(e){wi=e}},{key:"deviceIdVerification",get:function(){return Si},set:function(e){Si=e}},{key:"sessionId",get:function(){return Ii},set:function(e){Ii=e}},{key:"isActiveSession",get:function(){return Ci},set:function(e){Ci=e}},{key:"isNeededRestartSecsPlayed",get:function(){return Ni},set:function(e){Ni=e}},{key:"lastActiveSessionTimestamp",get:function(){return bi},set:function(e){bi=e}},{key:"maxInactivityIntervalInSeconds",get:function(){return Pi},set:function(e){Pi=e}},{key:"contentId",get:function(){return Mi},set:function(e){Mi=e}},{key:"userId",get:function(){return Ei},set:function(e){Ei=e}}]),e}(),_i=function(){function e(){si(this,e)}return li(e,[{key:"dataStore",get:function(){return Di}}]),e}(),xi=function(){function e(){si(this,e)}return li(e,[{key:"dataStore",get:function(){return Di}}]),e}();ni("keys",function(){return function(e){return J(se(e))}});var Oi=c.Object.keys,Li=e(t(function(e){e.exports={default:Oi,__esModule:!0}})),Vi=c.JSON||(c.JSON={stringify:JSON.stringify}),Ri=function(e){return Vi.stringify.apply(Vi,arguments)},Fi=e(t(function(e){e.exports={default:Ri,__esModule:!0}})),ji=function(){function e(){si(this,e)}return li(e,null,[{key:"request",value:function(e){return new ei(function(t,i){var a=new XMLHttpRequest,n=null;"box"==e.url.substring(0,e.url.indexOf("_"))?a.open(e.method,baseUrlLog+e.url||"",!0):a.open(e.method,"https://marker.data.rtve.es/"+e.url||""+e.params||"",!0),e.data&&(n=Fi(e.data),a.setRequestHeader("Content-type","application/json; charset=utf-8")),e.headers&&Li(e.headers).forEach(function(t){a.setRequestHeader(t,e.headers[t])}),a.onload=function(){a.status>=200&&a.status<300?a.response?t(JSON.parse(a.response)):t():i(a.statusText)},a.onerror=function(){i(a.statusText)},a.ontimeout=function(){i(a.statusText)},a.onabort=function(){i(a.statusText)},a.send(n)})}},{key:"get",value:function(e,t){return this.request({method:"GET",url:e,params:t})}},{key:"post",value:function(e,t,i){return this.request({method:"POST",url:e,data:t,params:i})}},{key:"put",value:function(e,t,i){return this.request({method:"PUT",url:e,data:t,params:i})}},{key:"delete",value:function(e,t){return this.request({method:"DELETE",url:e,params:t})}}]),e}(),Bi={},Ui=0,Gi=(function(e){function t(){return si(this,t),di(this,(t.__proto__||oi(t)).apply(this,arguments))}ui(t,ji),li(t,null,[{key:"setNewLog",value:function(e){Bi[Ui]=e,Ui>5?(this.sendLog(),Bi={},Ui=0):Ui+=1}},{key:"sendLog",value:function(e){return this.post("box_0b9afbdb7a5293691834",{message:e})}}])}(),function(e){function t(){return si(this,t),di(this,(t.__proto__||oi(t)).call(this))}return ui(t,xi),li(t,[{key:"attachAllActiveTagEvents",value:function(){var e=this;this.dataStore.activeTags.forEach(function(t){if("Player"===t.event.eventType)switch(t.event.eventName){case"Media Start":e.startEventTrigger();break;case"Media Play":e.playEventTrigger();break;case"Media Pause":e.pauseEventTrigger();break;case"Media Finish":e.finishEventTrigger();break;case"Media Dispose":e.disposeEventTrigger();break;case"Media Heartbeat":e.isAliveEventTrigger();break;case"Media Seek":e.seekingEventTrigger();break;case"Media Error":e.errorEventTrigger();break;case"Media Loaded Data":e.loadStartEventTrigger();break;case"Media Full Screen":e.fullScreenEventTrigger();break;case"Media Mute":e.muteEventTrigger();break;default:console.log(t.event.eventName+": Event trigger not found")}})}},{key:"setMediaType",value:function(e,t){var i=_playerServices.get(e);i&&i.setMediaType(t)}},{key:"attachAllActiveTagEventsHBBTV",value:function(){var e=this;this.player.controls=!0;var t=this;this.dataStore.activeTags.forEach(function(i){if("Player"===i.event.eventType)switch(i.event.eventName){case"Media Start":e.player.addEventListener("play",function(){t.startEventTrigger()});break;case"Media Play":e.player.addEventListener("playing",function(){t.playEventTrigger()});break;case"Media Pause":e.player.addEventListener("pause",function(){t.pauseEventTrigger()});break;case"Media Finish":e.player.addEventListener("ended",function(){t.finishEventTrigger()});break;case"Media Dispose":break;case"Media Heartbeat":e.isAliveEventTrigger();break;case"Media Seek":e.player.addEventListener("seeking",function(){t.seekingEventTrigger()});break;case"Media Error":e.player.addEventListener("error",function(){t.errorEventTrigger()});break;case"Media Loaded Data":e.player.addEventListener("loadeddata",function(){t.loadStartEventTrigger()});break;case"Media Full Screen":e.player.addEventListener("fullscreenchange",function(){t.fullScreenEventTrigger()});break;case"Media Mute":e.player.addEventListener("volumechange",function(){t.muteEventTrigger()});break;default:console.log(i.event.eventName+": Event trigger not found")}})}},{key:"manageActiveTagRTVEPlayer",value:function(e){switch(e){case 0:break;case 1:this.playbackEventTrigger();break;case 2:this.pauseEventTrigger();break;case 3:this.loadStartEventTrigger();break;case 4:break;case 5:this.finishEventTrigger();break;case 6:this.errorEventTrigger()}}},{key:"attachActiveTagEvent",value:function(e,t,i){console.log("Method not implemented")}},{key:"startEventTrigger",value:function(){console.log("Method not implemented")}},{key:"playEventTrigger",value:function(){console.log("Method not implemented")}},{key:"pauseEventTrigger",value:function(){console.log("Method not implemented")}},{key:"finishEventTrigger",value:function(){console.log("Method not implemented")}},{key:"disposeEventTrigger",value:function(){console.log("Method not implemented")}},{key:"isAliveEventTrigger",value:function(){console.log("Method not implemented")}},{key:"loadStartEventTrigger",value:function(){console.log("Method not implemented")}},{key:"loadEndEventTrigger",value:function(){console.log("Method not implemented")}},{key:"seekingEventTrigger",value:function(){console.log("Method not implemented")}},{key:"subtitleChangeEventTrigger",value:function(){console.log("Method not implemented")}},{key:"adStartEventTrigger",value:function(){console.log("Method not implemented")}},{key:"adClickEventTrigger",value:function(){console.log("Method not implemented")}},{key:"adSkipEventTrigger",value:function(){console.log("Method not implemented")}},{key:"adEndEventTrigger",value:function(){console.log("Method not implemented")}},{key:"bufferChangeEventTrigger",value:function(){console.log("Method not implemented")}},{key:"bitRateChangeEventTrigger",value:function(){console.log("Method not implemented")}},{key:"errorEventTrigger",value:function(){console.log("Method not implemented")}},{key:"fullScreenEventTrigger",value:function(){console.log("Method not implemented")}},{key:"muteEventTrigger",value:function(){console.log("Method not implemented")}}]),t}()),Hi={f:Object.getOwnPropertySymbols},Yi={f:{}.propertyIsEnumerable},qi=Object.assign,zi=!qi||v(function(){var e={},t={},i=Symbol(),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(e){t[e]=e}),7!=qi({},e)[i]||Object.keys(qi({},t)).join("")!=a})?function(e,t){for(var i=se(e),a=arguments.length,n=1,r=Hi.f,o=Yi.f;a>n;)for(var c,s=D(arguments[n++]),l=r?J(s).concat(r(s)):J(s),u=l.length,d=0;u>d;)o.call(s,c=l[d++])&&(i[c]=s[c]);return i}:qi;N(N.S+N.F,"Object",{assign:zi});var Ji=c.Object.assign,Wi=e(t(function(e){e.exports={default:Ji,__esModule:!0}})),Ki=function(e){function t(){return si(this,t),di(this,(t.__proto__||oi(t)).apply(this,arguments))}return ui(t,ji),li(t,null,[{key:"record",value:function(e,t){return this.post("mark",{datasetid:e,mark:t})}}]),t}(),Zi=function(){function e(){si(this,e),this.dataset="",this.domain=null,this.autoPersistCookie=!1}return li(e,null,[{key:"setCookieDomain",value:function(e){e&&(this.domain=e)}},{key:"getCookieDomain",value:function(){return this.domain}},{key:"setDataset",value:function(e){this.dataset=e}},{key:"getDataset",value:function(){return this.dataset}},{key:"setAutoPersistCookie",value:function(e){this.autoPersistCookie=e}},{key:"isAutoPresistCookie",value:function(){return this.autoPersistCookie}},{key:"getNewTechCookieName",value:function(){return"kng_aflow_v1.0"}},{key:"getOldTechCookieName",value:function(){return"kng_aflow"}},{key:"getCustomerCookieName",value:function(){return"knd_aflow_"+this.dataset}},{key:"getTechCookieName",value:function(){try{return""!==this.getBaseCookie(this.getNewTechCookieName())?this.getNewTechCookieName():this.getOldTechCookieName()}catch(e){return console.info(e),null}}},{key:"getRemoteDomain",value:function(){for(var e=window.location.hostname.split("."),t=e.length-1,i="";t>=0&&t>=e.length-2;)i="."+e[t]+i,t-=1;return i}},{key:"setCookieValue",value:function(e,t,i){var a={},n="customerCookie"===i?this.getCustomerCookieName():this.getTechCookieName();try{(a=JSON.parse(this.getBaseCookie(n)))[e]=t}catch(i){a[e]=t}var r=new Date;r.setFullYear(r.getFullYear()+1);var o=n+"="+Fi(a)+";expires="+r.toUTCString()+";domain="+this.getRemoteDomain()+";path=/";document.cookie=o}},{key:"getCookieValue",value:function(e,t){var i="customerCookie"===t?this.getCustomerCookieName():this.getTechCookieName();try{var a=this.verifyOnCookieVersion(i,e);return null!==a?a:null}catch(e){return null}}},{key:"deleteCookie",value:function(e){var t=new Date;t.setTime(t.getTime());var i=e+"=;expires="+t.toUTCString()+";domain="+this.getRemoteDomain()+";path=/";document.cookie=i}},{key:"saveCustomerCookie",value:function(e,t,i,a){try{if(a)for(var n in a)a.hasOwnProperty(n)&&this.setCookieValue(n,a[n],"customerCookie");this.setCookieValue("dataset",e,"customerCookie"),this.setCookieValue("analysis",t,"customerCookie"),this.setCookieValue("behavioural",i,"customerCookie")}catch(e){return void console.log(e)}}},{key:"verifyOnCookieVersion",value:function(e,t){var i=this.getBaseCookie(e),a=""!==i?JSON.parse(i):{};return a.hasOwnProperty(t)?a[t]:null}},{key:"existCookie",value:function(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return!0}return!1}},{key:"getBaseCookie",value:function(e){for(var t=e+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""}},{key:"getCookie",value:function(){try{return""!==this.getBaseCookie(this.getNewTechCookieName())?this.getBaseCookie(this.getNewTechCookieName()):this.getBaseCookie(this.getOldTechCookieName())}catch(e){return console.info(e),""}}},{key:"getCustomerCookie",value:function(){try{return""!==this.getBaseCookie(this.getCustomerCookieName())?this.getBaseCookie(this.getCustomerCookieName()):""}catch(e){return""}}},{key:"setCookieToViewContext",value:function(e,t,i){var a=this.getRemoteDomain(),n="customer"===i?this.getCustomerCookieName():this.getTechCookieName();if(e.hasOwnProperty("digitalData")?e.hasOwnProperty("digitalData")&&!e.digitalData.hasOwnProperty("privacy")&&(e.digitalData.privacy={}):e.digitalData={privacy:{}},e.hasOwnProperty("digitalData")&&e.digitalData.hasOwnProperty("privacy")){var r={categoryName:n,domain:a};if(t&&Li(t).length>0&&(r.customData=t),e.digitalData.privacy.hasOwnProperty("accessCategories")){var o=e.digitalData.privacy.accessCategories.map(function(e){return e.categoryName}).indexOf(n);o>=0?e.digitalData.privacy.accessCategories[o]=r:e.digitalData.privacy.accessCategories.push(r)}else e.digitalData.privacy={accessCategories:[r]};return e}}},{key:"removeCookieToViewContext",value:function(e,t){var i="customer"===t?this.getCustomerCookieName():this.getTechCookieName();if(e.hasOwnProperty("digitalData")&&e.digitalData.hasOwnProperty("privacy")&&e.digitalData.privacy.hasOwnProperty("accessCategories")){var a=e.digitalData.privacy.accessCategories.map(function(e){return e.categoryName}).indexOf(i);return a>=0&&e.digitalData.privacy.accessCategories.splice(a,1),e}}}]),e}(),Xi=function(){function e(){si(this,e)}return li(e,null,[{key:"setType",value:function(e,t){if(null==e)return null;switch(t){case"float":return Number(e)!==e||ai(e)?null:e;case"int":return Number(e)===e&&ai(e)?e:null;case"string":return"string"==typeof e||e instanceof String?e:null;case"array":return"array"==typeof e||e instanceof Array?e:null;case"json":return"object"===(void 0===e?"undefined":ci(e))&&e.constructor==={}.constructor?e:null;default:return null}}},{key:"getCurrentLocation",value:function(){return new ei(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var i=[t.coords.latitude,t.coords.longitude];e(i)},function(e){t(e)},{enableHighAccuracy:!0,timeout:1e4}):t(new Error("Geolocation not supported"))})}},{key:"getPageUrl",value:function(){return window.location.href}},{key:"getTabTitlePage",value:function(){return document.title}},{key:"getDeviceResolution",value:function(){return[window.screen.availWidth,window.screen.availHeight]}},{key:"getScrollPercent",value:function(){var e=document.documentElement,t=document.body,i="scrollTop",a="scrollHeight";if((e[a]||t[a])<=window.innerHeight)return 1;if(!e[i]&&!t[i])return 0;var n=(e[i]||t[i])/((e[a]||t[a])-window.innerHeight);return Math.round(100*n)/100}},{key:"getSidString",value:function(){return("00000"+Math.floor(1e5*Math.random())).slice(-5)}},{key:"setIfTypeIsOk",value:function(e,t){var i=!1;switch(t){case"number":isNaN(e)||(i=!0);break;case"string":("string"==typeof e||e instanceof String)&&(i=!0);break;case"array":("array"==typeof e||e instanceof Array)&&(i=!0);break;default:i=!1}return i}},{key:"getActiveTag",value:function(e,t){var i=0;for(i in e)if(e[i].event&&e[i].event.eventName==t)return e[i];return null}},{key:"buildCid",value:function(e,t){return"Player"==e.event.eventType?t&&t.rtveAsset&&t.rtveAsset.assetInstanceId?t.rtveAsset.assetInstanceId:t&&t.digitalData&&t.digitalData.product&&t.digitalData.product.productInfo&&t.digitalData.product.productInfo.productID?t.digitalData.product.productInfo.productID:t&&t.digitalData&&t.digitalData.pageInstanceID?t.digitalData.pageInstanceID:"":t&&t.digitalData&&t.digitalData.pageInstanceID?t.digitalData.pageInstanceID:""}},{key:"castTopicsToArray",value:function(e){return e.digitalData.page.category.topics instanceof Array?e.digitalData.page.category.topics:"string"==typeof e.digitalData.page.category.topics||e.digitalData.page.category.topics instanceof String?e.digitalData.page.category.topics.split("|").map(function(e){return e.trim()}):[]}},{key:"correctUrl",value:function(e){var t=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi);if(e.match(t)){var i=e.split("/").slice(-1)[0];return i.length>0?"http://rtve.es/pr/"+i:""}return""}},{key:"checkIfAlphanumeric",value:function(e){return e!=parseInt(e)&&/^[a-z0-9]+$/i.test(e)}}]),e}(),$i=function(e){function t(){si(this,t);var e=di(this,(t.__proto__||oi(t)).call(this));return null===e.dataStore.lastActiveSessionTimestamp&&(e.dataStore.lastActiveSessionTimestamp=(new Date).getTime()),e}return ui(t,xi),li(t,[{key:"recordActiveTagEvent",value:function(e,t){var i={},a={schema:"1.0.0"},n=(new Date).getTime();i.tag=e.activeTagId,i.version=a,this.dataStore.isActiveSession&&(n-this.dataStore.lastActiveSessionTimestamp)/1e3>this.dataStore.maxInactivityIntervalInSeconds?(this.dataStore.sessionId=this.dataStore.deviceId+"-"+Xi.getSidString(),(Zi.existCookie(Zi.getTechCookieName())||Zi.isAutoPresistCookie())&&Zi.setCookieValue("sid",this.dataStore.sessionId,Zi.getTechCookieName()),"2"===e.activeTagId?this.dataStore.isActiveSession=!1:this.dataStore.lastActiveSessionTimestamp=n,this.dataStore.isNeededRestartSecsPlayed=!0):"2"!==e.activeTagId&&(this.dataStore.lastActiveSessionTimestamp=n,!1===this.dataStore.isActiveSession&&(this.dataStore.isActiveSession=!0,this.dataStore.isNeededRestartSecsPlayed=!0,this.dataStore.sessionId=this.dataStore.deviceId+"-"+Xi.getSidString(),(Zi.existCookie(Zi.getTechCookieName())||Zi.isAutoPresistCookie())&&Zi.setCookieValue("sid",this.dataStore.sessionId,Zi.getTechCookieName()))),i.isActiveSession=this.dataStore.isActiveSession,i.cdata=Wi({},this.dataStore.viewContext,t),this.dataStore.userId?i.uid=this.dataStore.userId:this.dataStore.viewContext&&this.dataStore.viewContext.digitalData&&this.dataStore.viewContext.digitalData.user&&this.dataStore.viewContext.digitalData.user.profile&&this.dataStore.viewContext.digitalData.user.profile.profileID?i.uid=this.dataStore.viewContext.digitalData.user.profile.profileID:this.dataStore.viewContext&&this.dataStore.viewContext.userId?i.uid=this.dataStore.viewContext.userId:i.uid="",this.dataStore.contentId?i.cid=this.dataStore.contentId:i.cid=Xi.buildCid(e,i.cdata),i.cdata&&i.cdata.digitalData&&i.cdata.digitalData.page&&i.cdata.digitalData.page.category&&i.cdata.digitalData.page.category.topics&&(i.cdata.digitalData.page.category.topics=Xi.castTopicsToArray(i.cdata));var r=Xi.getScrollPercent(),o=Xi.getPageUrl(),c=Xi.getTabTitlePage(),s=Xi.getDeviceResolution();return Xi.setIfTypeIsOk(r,"number")&&(i.cdata.scroll=r),Xi.setIfTypeIsOk(this.dataStore.deviceIdVerification,"number")&&(i.vdid=this.dataStore.deviceIdVerification),Xi.setIfTypeIsOk(this.dataStore.deviceId,"string")&&(i.did=this.dataStore.deviceId),Xi.setIfTypeIsOk(this.dataStore.sessionId,"string")&&(i.sid=this.dataStore.sessionId),Xi.setIfTypeIsOk(document.referrer,"string")&&(i.cdata.ref=document.referrer),Xi.setIfTypeIsOk(o,"string")&&(i.cdata.pageUrl=o),Xi.setIfTypeIsOk(c,"string")&&(i.cdata.pageTitle=c),Xi.setIfTypeIsOk(this.dataStore.coordinates,"array")&&(i.coord=this.dataStore.coordinates),Xi.setIfTypeIsOk(s,"array")&&(i.cdata.deviceResolution=s),(Zi.existCookie(Zi.getTechCookieName())||Zi.isAutoPresistCookie())&&Zi.setCookieValue("sidex",n,Zi.getTechCookieName()),Ki.record(this.dataStore.dataSetId,i)}}]),t}(),Qi=null,ea=function(e){function t(e){si(this,t);var i=di(this,(t.__proto__||oi(t)).call(this));return i.player=e,i.playbackRate=0,i.bufferPercentage=0,i.milliSecsPlayed=0,i.playerStatusBefore="LOADED",i.chunkTimeStarted=new Date,i.mediaType="",Qi=new $i,i.attachAllActiveTagEvents(),i}return ui(t,Gi),li(t,[{key:"getTotalSecondsPlayed",value:function(e,t){"PAUSED"===e&&"PLAYING"===this.playerStatusBefore?(this.playerStatusBefore="PAUSED",this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime()):"PLAYING"===e&&"PAUSED"===this.playerStatusBefore?(this.playerStatusBefore="PLAYING",this.chunkTimeStarted=new Date):"PLAYING"===e&&"PLAYING"===this.playerStatusBefore&&(this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime(),this.chunkTimeStarted=new Date)}},{key:"resetMillisPlayed",value:function(){this.milliSecsPlayed=0,this.chunkTimeStarted=new Date}},{key:"setMediaType",value:function(e){this.mediaType=e}},{key:"getMediaType",value:function(){return this.mediaType}},{key:"buildContentData",value:function(e,t){var i={},a="",n="";try{e.currentSrc()&&(a=e.currentSrc().split("/").pop(),n=e.currentSrc())}catch(e){a="",n=""}return i.playerStatus=e.paused()?"PAUSED":"PLAYING",i.mediaDuration=Math.floor(e.duration()),i.mediaName=a,i.mediaUrl=n,this.dataStore.isNeededRestartSecsPlayed&&(this.resetMillisPlayed(),this.dataStore.isNeededRestartSecsPlayed=!1),this.getTotalSecondsPlayed(i.playerStatus,t?t.type:"unknown"),i.secsPlayed=Math.floor(this.milliSecsPlayed/1e3),t&&(i.mediaResolution=[t.target.clientWidth,t.target.clientHeight]),""===this.mediaType?i.mediaType=""!==e.currentType()?e.currentType():"":i.mediaType=this.mediaType,i.currentPosition=Math.floor(e.currentTime()),i.playbackRate=e.playbackRate(),i.bufferPercentage=Math.round(100*e.bufferedPercent()),i.fullScreenStatus=e.isFullscreen(),i.muteStatus=e.muted(),i}},{key:"getFilteredActiveTag",value:function(e,t,i){for(var a in e){var n=e[a];if(n.event.eventType==i&&n.event.eventName==t)return n}}},{key:"attachActiveTagEvent",value:function(e,t,i){var a=this;this.player.on(t,function(t){console.log("Here in event %s",t.type);var n=a.buildContentData(a.player,t);Qi.recordActiveTagEvent(e,n).then(function(e){}).catch(function(e){console.log(e)}),i(n)})}},{key:"startEventTrigger",value:function(){var e=this;this.player.on("playing",function(t){if("LOADED"===e.playerStatusBefore){e.playerStatusBefore="PLAYING",e.milliSecsPlayed=0,e.chunkTimeStarted=new Date;var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Start","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})}})}},{key:"playEventTrigger",value:function(){var e=this;this.player.on("playing",function(t){if("LOADED"!==e.playerStatusBefore){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Play","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})}})}},{key:"pauseEventTrigger",value:function(){var e=this;this.player.on("pause",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Pause","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"finishEventTrigger",value:function(){var e=this;this.player.on("ended",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Finish","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"disposeEventTrigger",value:function(){var e=this;this.player.on("dispose",function(t){e.videoIsDestroyed=!0;var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Dispose","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"isAliveEventTrigger",value:function(){var e=this,t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Heartbeat","Player");this.isAliveInterval=setInterval(function(){if(!e.videoIsDestroyed&&t){if(!t.event.triggerOnStart&&e.player.paused())return;var i=e.buildContentData(e.player);Qi.recordActiveTagEvent(t,i).then(function(e){}).catch(function(e){console.log(e)})}},t.event.periodicity||3e4)}},{key:"dispose",value:function(){this.player.off(),clearInterval(this.isAliveInterval),clearInterval(this.bitRateChangeInterval),clearInterval(this.bufferChangeInterval)}},{key:"loadStartEventTrigger",value:function(){var e=this;this.player.on("loadeddata",function(t){e.playerStatusBefore="LOADED";var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Loaded Data","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"loadEndEventTrigger",value:function(){var e=this;this.player.on("loadedmetadata",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Load End","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"seekingEventTrigger",value:function(){var e=this;this.player.on("seeking",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Seek","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"bufferChangeEventTrigger",value:function(){var e=this;this.bufferChangeInterval=setInterval(function(){if(e.bufferPercentage!=Math.round(100*e.player.bufferedPercent())){var t=e.buildContentData(e.player),i=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Buffer Change","Player");i&&Qi.recordActiveTagEvent(i,t).then(function(e){}).catch(function(e){console.log(e)})}},1e3)}},{key:"bitRateChangeEventTrigger",value:function(){var e=this;this.bitRateChangeInterval=setInterval(function(){if(e.playbackRate!=e.player.playbackRate()){var t=e.buildContentData(e.player),i=e.getFilteredActiveTag(e.dataStore.activeTags,"Media BitRate Change","Player");i&&Qi.recordActiveTagEvent(i,t).then(function(e){}).catch(function(e){console.log(e)})}},1e3)}},{key:"errorEventTrigger",value:function(){var e=this;this.player.on("error",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Error","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"fullScreenEventTrigger",value:function(){var e=this;this.player.on("fullscreenchange",function(t){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Full Screen","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})})}},{key:"muteEventTrigger",value:function(){var e=this;this.player.on("volumechange",function(t){if(e.player.muted()){var i=e.buildContentData(e.player,t),a=e.getFilteredActiveTag(e.dataStore.activeTags,"Media Mute","Player");a&&Qi.recordActiveTagEvent(a,i).then(function(e){}).catch(function(e){console.log(e)})}})}},{key:"adStartEventTrigger",value:function(){}},{key:"adClickEventTrigger",value:function(){}},{key:"adSkipEventTrigger",value:function(){}},{key:"adEndEventTrigger",value:function(){}},{key:"subtitleChangeEventTrigger",value:function(){}}]),t}(),ta=function(e){function t(e){return si(this,t),di(this,(t.__proto__||oi(t)).call(this,e))}return ui(t,ea),li(t,[{key:"buildContentData",value:function(e,t){var i={},a="",n="";try{e.currentSrc()&&(a=e.currentSrc().split("/").pop(),n=e.currentSrc())}catch(e){a="",n=""}i.mediaName=a,i.mediaUrl=n,i.mediaDuration=Math.floor(e.duration()),i.playerStatus=e.paused()?"PAUSED":"PLAYING",i.currentPosition=Math.floor(e.currentTime()),i.playbackRate=e.playbackRate(),i.bufferPercentage=Math.round(100*e.bufferedPercent()),t&&(i.mediaResolution=[t.target.clientWidth,t.target.clientHeight]),this.dataStore.isNeededRestartSecsPlayed&&(this.resetMillisPlayed(),this.dataStore.isNeededRestartSecsPlayed=!1),this.getTotalSecondsPlayed(i.playerStatus,t?t.type:"unknown"),i.secsPlayed=Math.floor(this.milliSecsPlayed/1e3),""===this.mediaType?i.mediaType=""!==e.currentType()?e.currentType():"":i.mediaType=this.mediaType,i.rtveAsset={};for(var r=["categoryName","categoryUid","channel","dateOfEmission","duration","episode","id","assetType","programRef","programTitle","sgce","statUrl","state","title","consumption"],o=0;o<r.length;o++)i.rtveAsset[r[o]]=e.rtvePlayer.options.mediaConfig.assetConfig[r[o]];i.rtveAsset.programId=Xi.correctUrl(ia(e.rtvePlayer.options.mediaConfig.assetConfig.programRef)),i.rtveAsset.assetType=ia(e.rtvePlayer.options.type),i.rtveAsset.contentType=ia(e.rtvePlayer.options.mediaConfig.assetConfig.type.name);try{if(Xi.checkIfAlphanumeric(i.rtveAsset.id)){var c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.idStr=i.rtveAsset.id,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+i.rtveAsset.id,delete i.rtveAsset.id}else{var s=parseInt(i.rtveAsset.id);c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.id=s,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+s}}catch(e){i.rtveAsset.id=-1,i.rtveAsset.assetInstanceId=""}return i}}]),t}();function ia(e){return e||""}var aa=null,na=function(e){function t(e){si(this,t);var i=di(this,(t.__proto__||oi(t)).call(this));return i.player=e,i.playbackRate=0,i.bufferPercentage=0,i.milliSecsPlayed=0,i.playerStatusBefore="LOADED",i.chunkTimeStarted=new Date,i.mediaType="",aa=new $i,i.attachAllActiveTagEventsHBBTV(),i}return ui(t,Gi),li(t,[{key:"buildContentData",value:function(e,t){var i={},a="",n="";try{e.currentSrc&&(a=e.currentSrc.split("/").pop(),n=e.currentSrc)}catch(e){a="",n=""}i.mediaName=a,i.mediaUrl=n,i.mediaDuration=Math.floor(e.duration),i.playerStatus=e.paused?"PAUSED":"PLAYING",i.currentPosition=Math.floor(e.currentTime),i.playbackRate=parseFloat(e.playbackRate),i.buffered_percentage=Math.round(e.buffered.end(0)/e.duration*100),t&&(i.mediaResolution=[t.target.clientWidth,t.target.clientHeight]),this.dataStore.isNeededRestartSecsPlayed&&(this.resetMillisPlayed(),this.dataStore.isNeededRestartSecsPlayed=!1),this.getTotalSecondsPlayed(i.playerStatus,t?t.type:"unknown"),i.secsPlayed=Math.floor(this.milliSecsPlayed/1e3),i.rtveAsset={};var r=JSON.parse(window.GLOBAL.USERTRACKER).rtveAsset,o={categoryName:"string",categoryUid:"string",channel:"string",dateOfEmission:"string",duration:"int",episode:"int",id:"int",assetType:"string",programRef:"string",programTitle:"string",sgce:"string",statUrl:"string",state:"string",title:"string",consumption:"string"};Li(r).forEach(function(e){Li(o).forEach(function(t){t==e&&(i.rtveAsset[e]="id"===e?r[e]:Xi.setType(r[e],o[t]))})}),i.rtveAsset.programId=Xi.correctUrl(Xi.setType(r.programRef,o.programRef));try{if(Xi.checkIfAlphanumeric(i.rtveAsset.id)){var c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.idStr=i.rtveAsset.id,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+i.rtveAsset.id,delete i.rtveAsset.id}else{var s=parseInt(i.rtveAsset.id);c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.id=s,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+s}}catch(e){i.rtveAsset.id=-1,i.rtveAsset.assetInstanceId=""}return i}},{key:"setMediaType",value:function(e){this.mediaType=e}},{key:"getMediaType",value:function(){return this.mediaType}},{key:"resetMillisPlayed",value:function(){this.milliSecsPlayed=0,this.chunkTimeStarted=new Date}},{key:"getTotalSecondsPlayed",value:function(e,t){"PAUSED"===e&&"PLAYING"===this.playerStatusBefore?(this.playerStatusBefore="PAUSED",this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime()):"PLAYING"===e&&"PAUSED"===this.playerStatusBefore?(this.playerStatusBefore="PLAYING",this.chunkTimeStarted=new Date):"PLAYING"===e&&"PLAYING"===this.playerStatusBefore&&(this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime(),this.chunkTimeStarted=new Date)}},{key:"startEventTrigger",value:function(){if("LOADED"===this.playerStatusBefore){this.playerStatusBefore="PLAYING",this.milliSecsPlayed=0,this.chunkTimeStarted=new Date;var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Start","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"playEventTrigger",value:function(){if("LOADED"!==this.playerStatusBefore){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Play","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"pauseEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Pause","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"finishEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Finish","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"disposeEventTrigger",value:function(){console.log("Function not implemented.")}},{key:"isAliveEventTrigger",value:function(){var e=this,t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Heartbeat","Player");this.isAliveInterval=setInterval(function(){if(!e.videoIsDestroyed&&t){if(!t.event.triggerOnStart&&e.player.paused)return;var i=e.buildContentData(e.player);aa.recordActiveTagEvent(t,i).then(function(e){}).catch(function(e){console.log(e)})}},t.event.periodicity||3e4)}},{key:"getFilteredActiveTag",value:function(e,t,i){for(var a in e){var n=e[a];if(n.event.eventType==i&&n.event.eventName==t)return n}}},{key:"seekingEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Seek","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"errorEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Error","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"fullScreenEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Full Screen","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"loadEndEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Load End","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"loadStartEventTrigger",value:function(){this.playerStatusBefore="LOADED";var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Loaded Data","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"muteEventTrigger",value:function(){if(this.player.muted){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Mute","Player");t&&aa.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}}]),t}(),ra=null,oa=function(e){function t(e){si(this,t);var i=di(this,(t.__proto__||oi(t)).call(this));return i.player=e,i.playbackRate=0,i.bufferPercentage=0,i.milliSecsPlayed=0,i.playerStatusBefore="LOADED",i.chunkTimeStarted=new Date,i.mediaType="",ra=new $i,i.isAliveEventTrigger(),i}return ui(t,Gi),li(t,[{key:"buildContentData",value:function(e,t){var i={},a="",n="";try{e.data&&(a=e.data.split("/").pop(),n=e.data)}catch(e){a="",n=""}i.mediaName=a,i.mediaUrl=n,i.mediaDuration=Math.floor(e.playTime),i.playerStatus=2==e.playState?"PAUSED":"PLAYING",i.currentPosition=Math.floor(e.playPosition),t&&(i.mediaResolution=[t.target.clientWidth,t.target.clientHeight]),this.dataStore.isNeededRestartSecsPlayed&&(this.resetMillisPlayed(),this.dataStore.isNeededRestartSecsPlayed=!1),this.getTotalSecondsPlayed(i.playerStatus,t?t.type:"unknown"),i.secsPlayed=Math.floor(this.milliSecsPlayed/1e3),i.rtveAsset={};var r=JSON.parse(window.GLOBAL.USERTRACKER).rtveAsset,o={categoryName:"string",categoryUid:"string",channel:"string",dateOfEmission:"string",duration:"int",episode:"int",assetType:"string",id:"int",programRef:"string",programTitle:"string",sgce:"string",statUrl:"string",state:"string",title:"string",consumption:"string"};Li(r).forEach(function(e){Li(o).forEach(function(t){t==e&&(i.rtveAsset[e]="id"===e?r[e]:Xi.setType(r[e],o[t]))})}),i.rtveAsset.programId=Xi.correctUrl(Xi.setType(r.programRef,o.programRef));try{if(Xi.checkIfAlphanumeric(i.rtveAsset.id)){var c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.idStr=i.rtveAsset.id,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+i.rtveAsset.id,delete i.rtveAsset.id}else{var s=parseInt(i.rtveAsset.id);c="video"===i.rtveAsset.assetType?"v":"a";i.rtveAsset.id=s,i.rtveAsset.assetInstanceId="http://rtve.es/"+c+"/"+s}}catch(e){i.rtveAsset.id=-1,i.rtveAsset.assetInstanceId=""}return i}},{key:"setMediaType",value:function(e){this.mediaType=e}},{key:"getMediaType",value:function(){return this.mediaType}},{key:"resetMillisPlayed",value:function(){this.milliSecsPlayed=0,this.chunkTimeStarted=new Date}},{key:"getTotalSecondsPlayed",value:function(e,t){"PAUSED"===e&&"PLAYING"===this.playerStatusBefore?(this.playerStatusBefore="PAUSED",this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime()):"PLAYING"===e&&"PAUSED"===this.playerStatusBefore?(this.playerStatusBefore="PLAYING",this.chunkTimeStarted=new Date):"PLAYING"===e&&"PLAYING"===this.playerStatusBefore?(this.milliSecsPlayed+=(new Date).getTime()-this.chunkTimeStarted.getTime(),this.chunkTimeStarted=new Date):"PLAYING"===e&&"LOADED"===this.playerStatusBefore&&(this.playerStatusBefore="PLAYING")}},{key:"startEventTrigger",value:function(){if("PLAYING"!=this.playerStatusBefore){this.milliSecsPlayed=0,this.chunkTimeStarted=new Date;var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Start","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"playEventTrigger",value:function(){if("PLAYING"!=this.playerStatusBefore){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Play","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"playbackEventTrigger",value:function(){"LOADED"===this.playerStatusBefore?this.startEventTrigger():this.playEventTrigger()}},{key:"pauseEventTrigger",value:function(){if("PAUSED"!=this.playerStatusBefore){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Pause","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}},{key:"finishEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Finish","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"isAliveEventTrigger",value:function(){var e=this,t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Heartbeat","Player");this.isAliveInterval=setInterval(function(){var i=e.buildContentData(e.player);if(console.log(i),!e.videoIsDestroyed&&t){if(!t.event.triggerOnStart&&e.player.paused)return;var a=e.buildContentData(e.player);ra.recordActiveTagEvent(t,a).then(function(e){}).catch(function(e){console.log(e)})}},t.event.periodicity||3e4)}},{key:"getFilteredActiveTag",value:function(e,t,i){for(var a in e){var n=e[a];if(n.event.eventType==i&&n.event.eventName==t)return n}}},{key:"errorEventTrigger",value:function(){var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Error","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}},{key:"loadStartEventTrigger",value:function(){this.playerStatusBefore="LOADED";var e=this.buildContentData(this.player,event),t=this.getFilteredActiveTag(this.dataStore.activeTags,"Media Loaded Data","Player");t&&ra.recordActiveTagEvent(t,e).then(function(e){}).catch(function(e){console.log(e)})}}]),t}(),ca=null,sa=function(e){function t(){si(this,t);var e=di(this,(t.__proto__||oi(t)).call(this));return ca=new lt,e}return ui(t,_i),li(t,[{key:"initializePlayerService",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=null;if(!ca.get(e)){switch(t){case"videojs":n=new ea(i);break;case"rtvevideojs":n=new ta(i);break;case"rtvehbbtvtag":n=new na(i);break;case"rtvehbbtvobj":n=new oa(i);break;default:throw new Error("You must specify a valid player type")}n&&n.setMediaType(a),ca.set(e,n)}}},{key:"addActiveTagListener",value:function(e,t,i,a){ca.get(e).attachActiveTagEvent(t,i,a)}},{key:"disposePlayerService",value:function(e){console.log("action"),ca.get(e).dispose()}},{key:"playStateHandler",value:function(e,t){return ca.get(t)instanceof oa&&(ca.get(t).manageActiveTagRTVEPlayer(e),!0)}},{key:"disposePlayerServices",value:function(){console.log("action"),ca.forEach(function(e){e.dispose()})}},{key:"setMediaType",value:function(e,t){console.log("action");var i=ca.get(e);i&&i.setMediaType(t)}},{key:"getMediaType",value:function(e){console.log("action");var t=ca.get(e);return t?t.getMediaType():""}}]),t}(),la=function(e){function t(){return si(this,t),di(this,(t.__proto__||oi(t)).apply(this,arguments))}return ui(t,ji),li(t,null,[{key:"getActiveTags",value:function(e){return new ei(function(e,t){e(ua)}).catch(function(e){reject(e)})}}]),t}(),ua=[{activeTagId:"0",tagName:"Page View",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"0",eventName:"View",eventType:"Triggered"}},{activeTagId:"1",tagName:"Modal View",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"1",eventName:"Component View",eventType:"Triggered"}},{activeTagId:"2",tagName:"View Heartbeat",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"2",eventName:"View Heartbeat",eventType:"Timed",periodicity:3e4,triggerOnStart:!1}},{activeTagId:"3",tagName:"Media Start",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"3",eventName:"Media Start",eventType:"Player"}},{activeTagId:"4",tagName:"Media Play",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"4",eventName:"Media Play",eventType:"Player"}},{activeTagId:"5",tagName:"Media Pause",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"5",eventName:"Media Pause",eventType:"Player"}},{activeTagId:"6",tagName:"Media Finish",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"6",eventName:"Media Finish",eventType:"Player"}},{activeTagId:"7",tagName:"Media Dispose",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"7",eventName:"Media Dispose",eventType:"Player"}},{activeTagId:"8",tagName:"Media Heartbeat",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"8",eventName:"Media Heartbeat",eventType:"Player",periodicity:3e4,triggerOnStart:!1}},{activeTagId:"9",tagName:"Media Seek",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"9",eventName:"Media Seek",eventType:"Player"}},{activeTagId:"10",tagName:"Share",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"10",eventName:"Share",eventType:"Triggered"}},{activeTagId:"11",tagName:"Media Error",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"11",eventName:"Media Error",eventType:"Player"}},{activeTagId:"12",tagName:"Media Loaded Data",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"12",eventName:"Media Loaded Data",eventType:"Player"}},{activeTagId:"13",tagName:"Before Unload",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"13",eventName:"Before Unload",eventType:"Triggered"}},{activeTagId:"14",tagName:"Media Full Screen",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"14",eventName:"Media Full Screen",eventType:"Player"}},{activeTagId:"15",tagName:"Media Mute",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"15",eventName:"Media Mute",eventType:"Player"}},{activeTagId:"16",tagName:"Adblock",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"16",eventName:"Adblock",eventType:"Triggered"}},{activeTagId:"17",tagName:"Infinite Scroll Down",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"17",eventName:"Infinite Scroll Down",eventType:"Triggered"}},{activeTagId:"18",tagName:"Comment",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"18",eventName:"Comment",eventType:"triggered"}},{activeTagId:"19",tagName:"Click",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"19",eventName:"Click",eventType:"triggered"}},{activeTagId:"20",tagName:"Search",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"20",eventName:"Search",eventType:"triggered"}},{activeTagId:"21",tagName:"Login Request",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"21",eventName:"Login Request",eventType:"triggered"}},{activeTagId:"22",tagName:"Login Response",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"22",eventName:"Login Response",eventType:"triggered"}},{activeTagId:"23",tagName:"Change Password",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"23",eventName:"Change Password",eventType:"triggered"}},{activeTagId:"24",tagName:"Password Recovery",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"24",eventName:"Password Recovery",eventType:"triggered"}},{activeTagId:"25",tagName:"Request Password Recovery",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"25",eventName:"Request Password Recovery",eventType:"triggered"}},{activeTagId:"26",tagName:"Validate Password Recovery",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"26",eventName:"Validate Password Recovery",eventType:"triggered"}},{activeTagId:"27",tagName:"Sign On",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"25",eventName:"Sign On",eventType:"triggered"}},{activeTagId:"28",tagName:"Register",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"28",eventName:"Register",eventType:"triggered"}},{activeTagId:"29",tagName:"RecoClick",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"29",eventName:"RecoClick",eventType:"triggered"}},{activeTagId:"30",tagName:"EmailValidation",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"30",eventName:"EmailValidation",eventType:"triggered"}},{activeTagId:"31",tagName:"Logout",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"31",eventName:"Logout",eventType:"triggered"}},{activeTagId:"32",tagName:"ProfileUpdate",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"32",eventName:"ProfileUpdate",eventType:"triggered"}},{activeTagId:"33",tagName:"SaveCookie",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"33",eventName:"SaveCookie",eventType:"triggered"}},{activeTagId:"34",tagName:"SaveCustomerCookie",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"34",eventName:"SaveCustomerCookie",eventType:"triggered"}},{activeTagId:"35",tagName:"DeleteCustomerCookie",deviceType:{deviceTypeId:"0",deviceName:"All",brand:"Any",osName:"Any"},application:{applicationId:"0",applicationName:"All",description:"A Mark Collector application."},applicationView:{viewId:"0",viewName:"All",description:"A view within a Mark Collector application."},event:{eventId:"35",eventName:"DeleteCustomerCookie",eventType:"triggered"}}],da=function(e){function t(){return si(this,t),di(this,(t.__proto__||oi(t)).call(this))}return ui(t,xi),li(t,[{key:"getActiveTags",value:function(e,t){return la.getActiveTags({appName:e,viewName:t})}}]),t}(),va=null,pa={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},ga=function(e){return!document[e]},fa=function(e){function t(){si(this,t);var e=di(this,(t.__proto__||oi(t)).call(this));for(var i in e.markService=new $i,pa)if(i in document){va=i;break}return e}return ui(t,xi),li(t,[{key:"startTimedActiveTag",value:function(e){var t=this,i=this.dataStore.scheduledActiveTagTasks.get(e.activeTagId);return i&&i.taskId>0?i:(i={activeTag:e},e.triggerOnStart&&ga(va)&&this.markService.recordActiveTagEvent(i.activeTag,{}),i.taskId=setInterval(function(){ga(va)&&t.markService.recordActiveTagEvent(i.activeTag,{})},e.event.periodicity),this.dataStore.scheduledActiveTagTasks.set(e.activeTagId,i),i)}},{key:"stopTimedActiveTag",value:function(e){var t=this.dataStore.scheduledActiveTagTasks.get(e.activeTagId);return t&&(clearInterval(t.taskId),t.taskId=null),t}}]),t}(),ya=null,ha=null,ma=null,Ta=function(e){function t(){si(this,t);var e=di(this,(t.__proto__||oi(t)).call(this));return ya=new $i,ha=new da,ma=new fa,e}return ui(t,_i),li(t,[{key:"getActiveTags",value:function(){return 2===arguments.length?ha.getActiveTags(arguments[0],arguments[1]):this.dataStore.activeTags}},{key:"getScheduledActiveTagTasks",value:function(){return this.dataStore.scheduledActiveTagTasks}},{key:"recordActiveTagEvent",value:function(e,t){return ya.recordActiveTagEvent(e,t)}},{key:"startTimedActiveTag",value:function(e){return ma.startTimedActiveTag(e)}},{key:"stopTimedActiveTag",value:function(e){return ma.stopTimedActiveTag(e)}}]),t}(),ka=function(){function e(){si(this,e)}return li(e,null,[{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})}}]),e}(),Aa=null,wa=null;return function(){function e(){throw si(this,e),new Error("MarkCollector is not an instantiable class. You need to use static methods using the class directly")}return li(e,null,[{key:"init",value:function(t,i,a,n,r,o){return Aa=new sa,wa=new Ta,Di.dataSetId=t,Di.appName=i,Di.viewName=a,Di.viewContext=n,Di.isActiveSession=!0,Di.isNeededRestartSecsPlayed=!0,e.initializeSdkCookies(o,r),e.addCookiesToViewContextIfExists(),o&&o.enableGps&&Xi.getCurrentLocation().then(function(e){Di.coordinates=e}).catch(function(e){console.log(e)}),o&&o.maxInactivityIntervalInSeconds&&ai(o.maxInactivityIntervalInSeconds)?Di.maxInactivityIntervalInSeconds=o.maxInactivityIntervalInSeconds:Di.maxInactivityIntervalInSeconds=1800,new ei(function(e,t){wa.getActiveTags(i,a).then(function(t){t.forEach(function(e){"Timed"===e.event.eventType&&wa.startTimedActiveTag(e)}),Di.activeTags=t,e(t)}).catch(function(e){t(e)})})}},{key:"initializeSdkCookies",value:function(e,t){if(t&&t.hasOwnProperty("domain")&&Zi.setCookieDomain(t.domain),Zi.setDataset(Di.dataSetId),Zi.setAutoPersistCookie(!t||!t.hasOwnProperty("autoPersistCookie")||t.autoPersistCookie),Zi.existCookie(Zi.getTechCookieName())||Zi.isAutoPresistCookie())this.persistTechCookie(e);else{var i=ka.generateUUID(),a=("00000"+Math.floor(1e5*Math.random())).slice(-5);Di.deviceId=i,Di.deviceIdVerification=3,Di.sessionId=i+"-"+a}}},{key:"persistTechCookie",value:function(e){var t=Zi.getTechCookieName(),i=Zi.getCookieValue("did",t);i||(i=ka.generateUUID(),Zi.setCookieValue("did",i,t)),Di.deviceId=i;var a=Zi.getCookieValue("vdid",t),n=0;a?n=(new Date).getTime()-Number(a)<864e5?2:0:(Zi.setCookieValue("vdid",(new Date).getTime(),t),n=1),Di.deviceIdVerification=n;var r=Zi.getCookieValue("sidex",t),o=e&&e.sessionTimeOutSeconds?e.sessionTimeOutSeconds:1800;if(!!window.MSInputMethodContext&&!!document.documentMode&&(String.prototype.padStart=function(e,t){for(var i=this+"";i.length<e;)i=t+i;return i}),!r||(new Date).getTime()-Number(r)>1e3*o){var c=(new Date).getTime();Zi.setCookieValue("sidex",c,t);var s=("00000"+Math.floor(1e5*Math.random())).slice(-5);Zi.setCookieValue("sid",i+"-"+s,t)}Di.sessionId=Zi.getCookieValue("sid",t)}},{key:"saveCookie",value:function(e){if(this.persistTechCookie(),e)for(var t in e)e.hasOwnProperty(t)&&Zi.setCookieValue(t,e[t],Zi.getTechCookieName());var i=Xi.getActiveTag(Di.activeTags,"SaveCookie"),a=this.getViewContext(),n=Zi.setCookieToViewContext(a,e,"tech");Di.viewContext=n,wa&&i&&wa.recordActiveTagEvent(i,n)}},{key:"getCookie",value:function(){return Zi.getCookie()}},{key:"saveCustomerCookie",value:function(e,t,i){if(""!==Di.dataSetId&&null!=e&&"boolean"==typeof e&&null!=t&&"boolean"==typeof t){Zi.saveCustomerCookie(Di.dataSetId,e,t,i);var a=Xi.getActiveTag(Di.activeTags,"SaveCustomerCookie"),n=this.getViewContext();i?(i.analysis=e,i.behavioural=t):((i={}).analysis=e,i.behavioural=t);var r=Zi.setCookieToViewContext(n,i,"customer");Di.viewContext=r,wa&&a&&wa.recordActiveTagEvent(a,r)}}},{key:"getCustomerCookie",value:function(){return Zi.getCustomerCookie()}},{key:"deleteCustomerCookie",value:function(){Zi.deleteCookie(Zi.getCustomerCookieName());var e=Xi.getActiveTag(Di.activeTags,"DeleteCustomerCookie"),t=this.getViewContext(),i=Zi.removeCookieToViewContext(t,"customer");Di.viewContext=i,wa&&e&&wa.recordActiveTagEvent(e,i)}},{key:"addCookiesToViewContextIfExists",value:function(){if(Zi.existCookie(Zi.getTechCookieName())){var e=JSON.parse(Zi.getCookie());delete e.did,delete e.sid,delete e.vdid,delete e.sidex;var t=Zi.setCookieToViewContext(this.getViewContext(),e,"tech");Di.viewContext=t}if(Zi.existCookie(Zi.getCustomerCookieName())){var i=JSON.parse(Zi.getCustomerCookie());delete i.dataset;var a=Zi.setCookieToViewContext(this.getViewContext(),i,"customer");Di.viewContext=a}}},{key:"getViewContext",value:function(){return Di.viewContext}},{key:"setViewContext",value:function(e){Di.viewContext=e,e.hasOwnProperty("digitalData")&&e.digitalData.hasOwnProperty.privacy||this.addCookiesToViewContextIfExists()}},{key:"getMaxInactivityIntervalInSeconds",value:function(){return Di.maxInactivityIntervalInSeconds}},{key:"getDid",value:function(){return Di.deviceId}},{key:"getVdid",value:function(){return Di.deviceIdVerification}},{key:"getSid",value:function(){return Di.sessionId}},{key:"getPageUrl",value:function(){return Di.pageUrl}},{key:"getPageTitle",value:function(){return Di.pageTitle}},{key:"getDeviceResolution",value:function(){return Di.deviceResolution}},{key:"getCoordinates",value:function(){return Di.coordinates}},{key:"setContentId",value:function(e){Di.contentId=e}},{key:"setUserId",value:function(e){Di.userId=e}},{key:"destroy",value:function(){Di.scheduledActiveTagTasks.forEach(function(e){clearInterval(e.taskId)}),Aa.disposePlayerServices(),Di.viewContext={},Di.activeTags=[],Di.scheduledActiveTagTasks=new lt,Di.dataSetId=null,Di.viewName=null,Di.appName=null,Di.coordinates=null,Di.pageUrl=null,Di.pageTitle=null,Di.deviceResolution=null,Di.lastActiveSessionTimestamp=null,Di.isActiveSession=null,Di.maxInactivityIntervalInSeconds=null}},{key:"playerController",get:function(){return Aa}},{key:"eventController",get:function(){return wa}}]),e}()}();
