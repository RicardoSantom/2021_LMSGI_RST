(this.dmpJsonp=this.dmpJsonp||[]).push([["queue"],{Dt2Z:function(e,t,n){"use strict";function i(e){var t=e.id,n=e.duration,i=void 0===n?300:n,o=e.to,a=e.from,r=e.apply,s=e.done,u=e.cancel,l=e.easing,d=performance.now(),c=l||q.b,p=()=>{var e=(performance.now()-d)/i;e>1&&(e=1);var n=a+(o-a)*c(e);if(r(n,e),1===e)return delete Q[t],void(s&&s(n));h.last={pos:n,progress:e},h.timer=window.requestAnimationFrame(p)},h=Q[t]={cancel:u,timer:window.requestAnimationFrame(p)};return t}function o(e){return Object.prototype.hasOwnProperty.call(Q,e)}function a(e){if(e){var t=Q[e];t&&t.timer&&(cancelAnimationFrame(t.timer),t.cancel&&t.cancel(t.last),delete Q[e])}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){I()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){I()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e){var t=Object(v.createStructuredSelector)({adLinearIsRunning:ht.u,IVVIsRunning:gt.e,isStartScreen:k.d,isEndScreen:k.c,interactionModeCurrentIsTouch:mt.b,breakpointHorizontalXS:O.d,breakpointHorizontalS:O.c,queueCollapsedOverflow:b.g,queueShowOnStartScreen:T.q,queueCurrentItemIsLast:b.h,isUpNextDisplayed:b.d,queueIsHidden:b.m,queueIsCollapsed:b.i,queueIsExpanded:b.k,queueIsCollapsing:b.j,isAlertDialogDisplayed:dt.a,isQueueAutoplayEnabled:b.b,controlsPresent:vt.f,controlsAbsenceReason:vt.a,settingsControls:W.h,pointerIsOnPlayer:bt.c,sequenceIsPreparingNext:A.e,sequenceIsLoadingNext:A.d,activeElementIsAControl:ct.b,activeElementIsInsideQueue:pt.a,activeInteractionIsKeyboard:pt.d,playbackHasPlayedOnce:ft.h}),n=e=>({onDraggingStart:()=>{e(Object(S.n)())},onDraggingEnd:()=>{e(Object(S.m)())},onTransitionStarted:t=>{e(Object(S.q)(t))},onTransitionEnded:t=>{e(Object(S.p)(t))},onExpanded:()=>{e(Object($e.x)())},onCollapsed:()=>{e(Object($e.w)())},onHidden:()=>{e(Object($e.w)())},onWillUnmount:()=>{e(Object($e.w)())}});class i extends h.Component{constructor(e){super(e),this.state={transition:null,variant:P.c,reason:"default",left:e.queueCollapsedOverflow,leftOnStartDragging:0,callbackAfterAutoExpand:null,isHovering:!1},this.setCallbackAfterAutoExpand=this.setCallbackAfterAutoExpand.bind(this),this.onVideoLoadFromQueue=this.onVideoLoadFromQueue.bind(this),this.onSkipQueue=this.onSkipQueue.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onWheel=this.onWheel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTap=this.onTap.bind(this),this.onEscape=this.onEscape.bind(this)}setCallbackAfterAutoExpand(e){this.setState({callbackAfterAutoExpand:e})}getQueueElement(){return this.base.querySelector(".np_Queue")}computeQueueWidth(){return this.getQueueElement().getBoundingClientRect().width}computeLeftWhenHidden(){return this.props.queueCollapsedOverflow}computeLeftWhenCollapsed(){return 0}computeLeftWhenExpanded(){var e=this.computeQueueWidth();return-(e-this.props.queueCollapsedOverflow)}computeLeftForVariant(e){return e===P.c?this.computeLeftWhenHidden():e===P.a?this.computeLeftWhenCollapsed():this.computeLeftWhenExpanded()}computeLeftWhenDragging(){var e=this.state.leftOnStartDragging,t=0,n=this.computeLeftWhenExpanded(),i=Math.max(n,Math.min(0,e+this.props.offsetX));return i}onSkipQueue(){this.transit({variant:P.a,reason:"skip-queue",duration:500}),setTimeout(()=>{var e=Object(xt.a)({from:this.base,skipChildren:!0,predicate:xt.h});e&&e.focus()})}willAutoCollapseAfterVideoLoad(){return"number"==typeof this.autoCollapseAfterVideoLoadFromQueueTimeoutId}cancelAutoCollapseAfterVideoLoadFromQueue(){clearTimeout(this.autoCollapseAfterVideoLoadFromQueueTimeoutId),this.autoCollapseAfterVideoLoadFromQueueTimeoutId=null}onVideoLoadFromQueue(){this.cancelAutoCollapseAfterVideoLoadFromQueue(),this.autoCollapseAfterVideoLoadFromQueueTimeoutId=setTimeout(()=>{this.autoCollapseAfterVideoLoadFromQueueTimeoutId=null,this.transit({variant:this.props.pointerIsOnPlayer?P.a:P.c,reason:"auto-collapse-after-video-load-from-queue",duration:500})},5e3)}computeLeftWhenPointerStartsDragging(){return this.computeLeftForVariant(this.state.variant)}computeVariantWhenPointerStartsDragging(){return this.computeVariantWhenPointerIsDragging()}computeVariantWhenPointerIsDragging(){return this.computeVariantWhenPointerEndsDragging()}computeVariantWhenPointerEndsDragging(){var e=this.state.left,t=this.computeQueueWidth()/2;return Math.abs(e)>=t?P.b:P.a}createTransition(e){var t=e.variant,n=void 0===t?this.state.variant:t,i=e.reason,o=void 0===i?this.state.reason:i,a=e.left,r=e.duration,s=void 0===r?0:r,u=e.state,l=void 0===u?null:u;if(n===P.a){var d=St(this.props);d&&(Pt.log("force variant transition to ".concat(P.c," because ").concat(d," instead of ").concat(P.a," because ").concat(o)),n=P.c,o=d)}return void 0===a&&(a=this.computeLeftForVariant(n)),{variant:n,reason:o,left:a,duration:s,state:l}}stopTransition(){var e=this.state.transition;e&&(this.endTransition(e),It.a.stop("queueAnimation"))}startTransition(e){this.props.onTransitionStarted(e)}endTransition(e){this.props.onTransitionEnded(e),e.variant===P.b?this.props.onExpanded():e.variant===P.a?this.props.onCollapsed():e.variant===P.c&&this.props.onHidden()}transit(e){if(e){var t=this.createTransition(e),n=t.variant,i=t.reason,o=t.left,a=t.duration,r=t.state,s=void 0===r?{}:r;this.cancelAutoCollapseAfterVideoLoadFromQueue();var u=this.state.transition,d=u?u.variant:this.state.variant,c=u?u.reason:this.state.reason,p=u?u.left:this.state.left,h={variant:n,reason:i,left:o},g=0===a||p===o;if(d!==n||c!==i||p!==o){if(this.stopTransition(),Ot({immediateTransition:g,fromVariant:d,toVariant:n,fromReason:c,toReason:i}),g)return this.setState(l({transition:null},s,{},h)),this.startTransition(t),void this.endTransition(t);this.setState(l({transition:t},s)),this.startTransition(t),It.a.start("queueAnimation",a,()=>{this.setState(l({transition:null},h)),this.endTransition(t),n===P.b&&"up-next-becomes-displayed"===i&&this.state.callbackAfterAutoExpand&&this.state.callbackAfterAutoExpand(this.props)})}else Pt.log("prevent ".concat(i,": already ").concat(n," because ").concat(i))}}onMouseEnter(){this.state.variant!==P.c&&this.transit({variant:P.b,reason:"mouse-enter",duration:500,state:{isHovering:!0}})}onMouseLeave(){this.state.variant!==P.c&&this.base&&this.transit({variant:P.a,reason:"mouse-leave",duration:500,state:{isHovering:!1}})}onMouseMove(){this.state.variant!==P.c&&this.transit({variant:P.b,reason:"mouse-move",duration:500,state:{isHovering:!0}})}onWheel(){this.state.isHovering&&this.transit({variant:P.b,reason:"mouse-wheel",duration:0})}onTouchMove(){this.state.variant===P.b&&"pointer-is-dragging"!==this.state.reason&&this.transit({variant:P.b,reason:"touch-move",duration:0})}onTap(){this.state.variant!==P.c&&null===this.state.transition&&this.transit({variant:P.b,reason:"tap-to-expand",duration:500})}onEscape(){this.state.variant===P.b&&this.transit({variant:this.props.pointerIsOnPlayer?P.a:P.c,reason:"escape",duration:500})}componentDidMount(){var e=this.props,t=At(e,this);this.transit(t)}componentDidUpdate(e){var t=this.props,n=jt({prevProps:e,props:t,component:this,willAutoCollapseAfterVideoLoad:this.willAutoCollapseAfterVideoLoad(),controlsPresentBeforeAutoExpand:this.state.controlsPresentBeforeAutoExpand});this.transit(n)}componentWillUnmount(){this.stopTransition(),this.props.onWillUnmount(),It.a.stop("queueAnimation")}render(t){var n=t.interactionModeCurrentIsTouch,i=t.queueIsExpanded,o=p()(t,["interactionModeCurrentIsTouch","queueIsExpanded"]);return Object(h.h)("div",{className:"np_fill-parent-passthrough"},n&&(i||"pointer-is-dragging"===this.state.reason)?Object(h.h)("div",{className:"np_fill-parent",style:{"pointer-events":"auto"},onClick:()=>{this.transit({variant:Dt({props:this.props,willAutoCollapseAfterVideoLoad:this.willAutoCollapseAfterVideoLoad(),controlsPresentBeforeAutoExpand:this.state.controlsPresentBeforeAutoExpand}),reason:"tap-outside-queue",duration:500})}}):null,Object(h.h)(e,w()({},o,{left:this.state.left,queueVariant:this.state.variant,queueTransition:this.state.transition,setCallbackAfterAutoExpand:this.setCallbackAfterAutoExpand,onVideoLoadFromQueue:this.onVideoLoadFromQueue,onSkipQueue:this.onSkipQueue,onMouseEnter:n?null:this.onMouseEnter,onMouseLeave:n?null:this.onMouseLeave,onMouseMove:n?null:this.onMouseMove,onWheel:n?null:this.onWheel,onClick:n?this.onTap:null,onTouchMove:n?this.onTouchMove:null,onEscape:this.onEscape})))}}return Object(g.compose)(Object(m.connect)(t,n))(i)}n.r(t),n.d(t,"__EXPORTED_CSS__",function(){return An}),n.d(t,"ContainerDialogQueue",function(){return On});var c=n("QILm"),p=n.n(c),h=n("2mXy"),g=n("fvjX"),m=n("/MKj"),v=n("peh1"),b=n("s9Tm"),f=n("lSNA"),I=n.n(f),x=n("cGXy"),y=n("iiVM"),q=n("B32M"),Q={},P=n("0qed"),O=n("ZJNx"),S=n("eeF7"),T=n("idq+"),A=n("zmjU"),j=n("1pil"),D=e=>({height:Object(j.b)(e)}),M=e=>{var t=e.height;return Object(h.h)("div",{style:{position:"absolute","pointer-events":"auto",left:0,right:0,bottom:0,height:t}})},C=Object(m.connect)(D)(M),E=n("gt3p"),k=n("Zw0V"),_=n("pVnL"),w=n.n(_),L=n("wipR"),V=(e,t,n)=>{var i=1,o=1*e.getBoundingClientRect().height,a={root:t,rootMargin:"0px 0px ".concat(o,"px 0px"),threshold:0},r=new IntersectionObserver(t=>{t[0].isIntersecting&&(r.unobserve(e),n())},a);return r.observe(e),()=>{r.disconnect()}};class N extends h.Component{constructor(e){super(e),this.state={isIntersecting:!1}}componentDidMount(){if(Object(L.j)()){var e=this.props.intersectionGetRootElement(this.base),t=this.props.intersectionGetTargetElement(e);this.intersectingRemoveListener=V(t,e,()=>{this.props.intersectionCallback&&this.props.intersectionCallback(),this.setState({isIntersecting:!0})})}else this.setState({isIntersecting:!0})}componentWillUnmount(){this.intersectingRemoveListener&&this.intersectingRemoveListener()}render(e){var t=e.src,n=p()(e,["src"]);return Object(h.h)("img",w()({src:this.state.isIntersecting?t:void 0},n))}}var H=n("Zrx9"),F=n("bwe7"),W=n("sNI+"),R=H.default.get("queue"),X=Object(F.a)({roundedRemainingTime:b.p,isUpNextReady:b.e,isUpNextDisplayed:b.d,isQueueAutoplayEnabled:b.b,isStartScreen:k.d,settingsControls:W.h,queueIsScrolling:T.l}),z=e=>{var t=e.onClick,n=e.onEscape,i=e.isUpNextReady,o=e.isUpNextDisplayed,a=e.roundedRemainingTime,r=e.isQueueAutoplayEnabled,s=e.tabIndex,u=e.isStartScreen,l=e.queueIsScrolling,d=e.item,c=e.index,p=e.isMiniQueue,g=e.isFirstItem,m=e.isLastItem,v=e.headerHeight,b=e.isCurrentItem,f=e.isNextItem,I=e.queueVariant,x=e.queueTransition,q=b?"np_DialogQueue-item--now":"",Q=f?"np_DialogQueue-item--next":"",P=f&&i&&r?"np_DialogQueue-item--autonext":"",O=De({queueVariant:I,queueTransition:x,headerHeight:v,isMiniQueue:p,isFirstItem:g});return Object(h.h)("button",{className:"np_DialogQueue-item ".concat(q," ").concat(Q," ").concat(P),onClick:()=>t(d.xid,c),tabIndex:s,style:Se({isCurrentItem:b,headerHeight:v,isMiniQueue:p,isFirstItem:g,isLastItem:m}),onKeyDown:e=>{"Escape"===e.key&&n()}},!u&&b?Object(h.h)("p",{className:"np_DialogQueue-label np_DialogQueue-label--now",style:O},y.a.__("neon:::Playing now")):!u&&r&&f?Object(h.h)("p",{className:"np_DialogQueue-label np_DialogQueue-label--next",style:O},y.a.__("neon:::Playing next"),o&&!1===l?Object(h.h)("span",{role:"timer"}," ",y.a.__("neon:::%seconds%s",{seconds:a})):""):"",Object(h.h)("p",{className:"np_DialogQueue-item-title",style:Le({queueVariant:I,queueTransition:x})},d.title),d.duration>0?Object(h.h)("p",{"aria-label":y.a.__("neon:::Duration: %time%",{time:Object(E.a)(d.duration)}),className:"np_DialogQueue-item-duration",style:Ce({headerHeight:v,isMiniQueue:p,isFirstItem:g,isCurrentItem:b,isNextItem:f})},Object(E.c)(d.duration)):"",Object(h.h)(N,{intersectionGetRootElement:()=>document.querySelector(".np_DialogQueue-body"),intersectionGetTargetElement:e=>e.querySelector("li:nth-child(".concat(c+1,")")),intersectionCallback:()=>{R.log("load ".concat(d.thumbnailURL," because intersected"))},src:d.thumbnailURL,alt:"",className:"np_DialogQueue-item-image",style:ke({isMiniQueue:p,queueVariant:I,queueTransition:x})}),Object(h.h)("div",{className:"np_DialogQueue-item-shadow",style:_e({isMiniQueue:p,isFirstItem:g,headerHeight:v,isCurrentItem:b,isNextItem:f})}))},U=8,$=20,B=16,G=8,Z=20,K=16,J=20,Y=16,ee=20,te=16,ne=85,ie=55,oe=75,ae=46,re=27,se=22,ue=78,le=49,de=88,ce=58,pe=90,he=59,ge=225,me=149,ve=40,be=30,fe=223,Ie=147,xe=21,ye=17,qe=57,Qe=36,Pe=69,Oe=44,Se=e=>{var t=e.isCurrentItem,n=e.headerHeight,i=e.isMiniQueue,o=e.isFirstItem,a=e.isLastItem;return{"padding-left":i?16:20,"padding-right":i?16:20,"padding-top":Te({isFirstItem:o,isMiniQueue:i,headerHeight:n}),"padding-bottom":je({isLastItem:a,isMiniQueue:i}),cursor:t?"default":""}},Te=e=>{var t=e.isFirstItem,n=e.isMiniQueue,i=e.headerHeight;if(t){var o=Ae({isMiniQueue:n,headerHeight:i}),a=o.spacingTop,r=o.offsetTop;return a+r}return 8},Ae=e=>{var t=e.isMiniQueue,n=e.headerHeight,i=t?16:20,o=n>0?Math.abs(i-n):0;return{spacingTop:i,offsetTop:o}},je=e=>{var t=e.isLastItem,n=e.isMiniQueue;return t?n?16:20:8},De=e=>{var t=e.headerHeight,n=e.isMiniQueue,i=e.isFirstItem,o=e.queueTransition,a=e.queueVariant,r=o?o.variant:a;return{left:n?22:27,top:Me({isFirstItem:i,isMiniQueue:n,headerHeight:t}),opacity:"expanded"===r?1:0}},Me=e=>{var t=e.isFirstItem,n=e.isMiniQueue,i=e.headerHeight;if(t){var o=Ae({isMiniQueue:n,headerHeight:i}),a=o.offsetTop;return n?55+a:85+a}return n?46:75},Ce=e=>{var t=e.headerHeight,n=e.isMiniQueue,i=e.isFirstItem,o=e.isCurrentItem,a=e.isNextItem;return{top:Ee({isFirstItem:i,isMiniQueue:n,headerHeight:t}),"text-shadow":o||a?"none":"0 0 3px black"}},Ee=e=>{var t=e.isFirstItem,n=e.isMiniQueue,i=e.headerHeight;if(t){var o=Ae({isMiniQueue:n,headerHeight:i}),a=o.offsetTop;return n?58+a:88+a}return n?49:78},ke=e=>{var t=e.isMiniQueue,n=e.queueTransition,i=e.queueVariant,o=n?n.variant:i;return{height:t?59:90,width:t?149:225,"border-color":"expanded"===o?"transparent":"#fff","transition-delay":0,"box-shadow":"expanded"===o?"none":"0 0 10px rgba(0,0,0,0.5)"}},_e=e=>{var t=e.isMiniQueue,n=e.isFirstItem,i=e.headerHeight,o=e.isCurrentItem,a=e.isNextItem;return{height:t?30:40,width:t?147:223,left:t?17:21,top:we({isFirstItem:n,isMiniQueue:t,headerHeight:i}),opacity:o||a?1:0}},we=e=>{var t=e.isFirstItem,n=e.isMiniQueue,i=e.headerHeight;if(t){var o=Ae({isMiniQueue:n,headerHeight:i}),a=o.offsetTop;return n?44+a:69+a}return n?36:57},Le=e=>{var t=e.queueVariant,n=e.queueTransition,i=n?n.variant:t;return{opacity:"expanded"===i?1:0,transition:n?"opacity 500ms":"none"}},Ve=Object(m.connect)(X)(z),Ne=e=>({height:Object(j.e)(e)}),He=e=>{var t=e.height;return Object(h.h)("div",{style:{position:"absolute","pointer-events":"auto",left:0,right:0,top:0,height:t}})},Fe=Object(m.connect)(Ne)(He),We=Object(v.createStructuredSelector)({settingsControls:W.h,isQueueAutoplayEnabled:b.b,sequenceStepIsEnded:A.l,queueVideos:T.x,queueCurrentIndex:T.e,queueCurrentItemIsLast:b.h}),Re=e=>({scrollQueueFromAutoNext:(t,n)=>{e(Object(S.g)(t)),e(Object(S.s)({index:n,reason:P.i}))}});class Xe extends h.Component{componentDidUpdate(e){var t=this.props;if(ze({prevProps:e,props:t})){var n=t.queueVideos,i=t.queueCurrentIndex,o=i+1,a=n[o].xid;t.scrollQueueFromAutoNext(a,o)}}render(){return null}}var ze=e=>{var t=e.prevProps,n=e.props;return!!n.settingsControls&&(!!n.isQueueAutoplayEnabled&&(!n.queueCurrentItemIsLast&&(!t.sequenceStepIsEnded&&n.sequenceStepIsEnded)))},Ue=Object(m.connect)(We,Re)(Xe),$e=n("vGkh"),Be=45,Ge=Object(v.createStructuredSelector)({queueCurrentIndex:T.e,breakpointVerticalXL:O.g,breakpointHorizontalM:O.b,breakpointHorizontalXS:O.d,breakpointHorizontalS:O.c,playerSizeWidth:O.p,queueVideos:T.x,queueSourceMode:T.r,queueSourceTypeIsPlaylist:T.t,queuePlaylistTitle:T.o,queueCollapsedOverflow:b.g,queueIsHidden:b.m,queueIsCollapsed:b.i,queueIsExpanding:b.l,queueIsScrollingForAutoNext:b.n,queueIsScrollingForManualNext:b.o,queueSourceXid:T.u,sequencePreparedId:A.i}),Ze=e=>({onDragGestureStart:()=>{e(Object($e.s)())},onDragGestureEnd:()=>{e(Object($e.r)())},scrollQueueFromManualNext:(t,n)=>{e(Object(S.g)(t)),e(Object(S.s)({index:n,reason:P.j}))},scrollQueueEnded:()=>{e(Object(S.f)()),e(Object(S.r)())},loadNextVideo:t=>{var n=t.id,i=t.interactionType,o=t.collectionXid,a=t.queueMode;e(Object(S.d)()),e(Object(S.e)({id:n,interactionType:i,collectionXid:o,queueMode:a}))},loadNextPage:()=>{e(Object(S.o)())}}),Ke=function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={root:n,rootMargin:"0px 0px ".concat(o,"px 0px"),threshold:0},r=new IntersectionObserver(e=>{e[0].isIntersecting&&(r.unobserve(t),i())},a);return r.observe(t),()=>{r.disconnect()}},Je=e=>{var t=e.queueSourceXid,n=e.queueSourceTypeIsPlaylist,i=e.queueSourceMode,o=e.queueCurrentIndex,a=null,r=P.f;return n&&(i===P.e?(a=t,r=P.e):o>0&&(a=t,r=P.f)),{collectionXid:a,queueMode:r}};class Ye extends h.Component{constructor(e){super(e),this.setScrollTop=this.setScrollTop.bind(this),this.updateScrollPosition=this.updateScrollPosition.bind(this),this.skipQueue=this.skipQueue.bind(this),this.onEscape=this.onEscape.bind(this),this.triggerManualNext=this.triggerManualNext.bind(this),this.getTargetScrollPos=this.getTargetScrollPos.bind(this)}cancelScrollAnimation(){}checkAutoOrManualNext(){var e=this.props,t=e.queueIsScrollingForAutoNext,n=e.queueIsScrollingForManualNext;if(t||n){var i=this.props,o=i.sequencePreparedId,a=i.queueCurrentIndex,r=i.queueSourceXid,s=i.queueSourceTypeIsPlaylist,u=i.queueSourceMode,l=Je({queueSourceXid:r,queueSourceTypeIsPlaylist:s,queueSourceMode:u,queueCurrentIndex:a}),d=l.collectionXid,c=l.queueMode;this.props.loadNextVideo({id:o,interactionType:t?x.b:x.c,collectionXid:d,queueMode:c}),this.props.onVideoLoadFromQueue()}}doEndAction(){this.props.scrollQueueEnded(),this.checkAutoOrManualNext()}getTopTarget(e,t){var n=e.queueSourceTypeIsPlaylist,i=e.breakpointVerticalXL,o=n||i;return o?this.refQueueItems[t]:this.refQueueItems[t+1]}getTargetScrollPos(e,t){var n=e.offsetTop-t,i=e.offsetTop-45;return this.props.queueHasTitle?i:n}setScrollTop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targetPosition,n=e.animate,r=e.doEndAction,s=e.duration,u=void 0===s?500:s;if(!n)return this.scrollZone.scrollTop=t,void(r&&this.doEndAction());i({id:"queue-scroll",from:this.scrollZone.scrollTop,to:t,duration:u,apply:e=>{this.scrollZone.scrollTop=e},done:()=>{r&&this.doEndAction()}}),this.cancelScrollAnimation=()=>{o("queue-scroll")&&(a("queue-scroll"),r&&this.props.scrollQueueEnded())}}componentWillUnmount(){this.cancelScrollAnimation()}updateScrollPosition(e){var t=e.index,n=e.animate,i=void 0===n||n,o=e.doEndAction,a=this.getTopTarget(this.props,t);if(a){var r=parseInt(getComputedStyle(a,null).paddingTop,10)||0;this.setScrollTop({targetPosition:this.getTargetScrollPos(a,r),animate:i,doEndAction:o})}else this.doEndAction()}skipQueue(e){e.stopPropagation(),this.props.onSkipQueue()}onEscape(){this.props.onEscape()}triggerManualNext(e,t){var n=this.props;ot(s({},n,{index:t}))&&n.scrollQueueFromManualNext(e,t)}componentWillMount(){this.refQueueItems=[]}componentDidMount(){var e=this.refQueueItems[this.refQueueItems.length-1];e&&Ke(e,this.scrollZone,()=>{this.props.loadNextPage()});var t=this.getTopTarget(this.props,0),n=parseInt(getComputedStyle(t,null).paddingTop,10)||0,i=this.getTargetScrollPos(t,n);this.setScrollTop({targetPosition:i,animate:!1,doEndAction:!1}),this.props.setCallbackAfterAutoExpand(e=>{this.updateScrollPosition({index:e.queueCurrentIndex,doEndAction:!1})})}componentDidUpdate(e){var t=this.props;if(et({prevProps:e,props:t})){var n=this.refQueueItems[this.refQueueItems.length-1];n&&Ke(n,this.scrollZone,()=>{this.props.loadNextPage()})}tt({prevProps:e,props:t})?this.updateScrollPosition({index:t.queueCurrentIndex,animate:!0,doEndAction:!0}):(nt({prevProps:e,props:t})||it({prevProps:e,props:t}))&&this.updateScrollPosition({index:t.queueCurrentIndex,animate:!0,doEndAction:!1})}render(e){var t=e.interactionModeCurrentIsTouch,n=e.queueVideos,i=e.queueCurrentIndex,o=e.playerSizeWidth,a=e.breakpointHorizontalM,r=e.queueSourceTypeIsPlaylist,s=e.queuePlaylistTitle,u=e.queueCollapsedOverflow,l=e.onRef,d=e.queueVariant,c=e.queueTransition,p=e.left,g=e.onClick,m=e.onMouseEnter,v=e.onMouseLeave,b=e.onMouseMove,f=e.onTouchMove,I=e.onWheel,x=d===P.c,q=at({interactionModeCurrentIsTouch:t,queueTransition:c,queueVariant:d}),Q=r&&s,O=c?c.variant:d;return Object(h.h)("div",{className:"np_Queue",style:{left:o-u,"pointer-events":d===P.c?"none":"auto"},onClick:g},Object(h.h)("div",{className:"np_dialog np_DialogQueue np_DialogQueue--".concat(O),role:"dialog","aria-label":y.a.__("neon:::Playing next queue"),style:st({queueVariant:d,queueTransition:c,left:p}),ref:l,onMouseEnter:t?null:m,onMouseMove:t?null:b,onMouseLeave:t?null:v},Q?Object(h.h)("div",{className:"np_DialogQueue-header",style:{height:45}},Object(h.h)("div",{id:"np_DialogQueue-title",className:"np_dialog-title np_DialogQueue-title"},s)):null,Object(h.h)("button",{"aria-label":y.a.__("neon:::Skip queue"),tabIndex:x?-1:null,title:y.a.__("neon:::Skip queue"),className:"np_button np_skip",onClick:this.skipQueue,onKeyDown:e=>{"Escape"===e.key&&d===P.b&&this.onEscape()}},y.a.__("neon:::Skip queue")),Object(h.h)("div",{className:"np_DialogQueue-body",tabIndex:x?-1:void 0,ref:e=>{this.scrollZone=e},onWheel:I,onTouchMove:f},Object(h.h)("ul",{className:"np_DialogQueue-list"},n.map((e,t)=>Object(h.h)("li",{className:"np_DialogQueue-list-item","data-video-id":e.xid},Object(h.h)(Ve,{item:e,ref:e=>{this.refQueueItems[t]=e?e.base:void 0},index:t,onClick:this.triggerManualNext,onEscape:this.onEscape,tabIndex:x?-1:void 0,isMiniQueue:!1===a,isFirstItem:0===t,isLastItem:t===n.length-1,headerHeight:Q?45:0,isCurrentItem:i===t,isNextItem:i+1===t,queueVariant:d,queueTransition:c}))))),q?Object(h.h)(Fe,null):null,q?Object(h.h)(C,null):null),Object(h.h)(Ue,null))}}var et=e=>{var t=e.prevProps,n=e.props;return!!t.queueVideos&&n.queueVideos.length>t.queueVideos.length},tt=e=>{var t=e.prevProps,n=e.props,i=n.queueVideos,o=n.queueCurrentIndex;return!!i&&(0!==i.length&&o!==t.queueCurrentIndex)},nt=e=>{var t=e.prevProps,n=e.props;return n.breakpointVerticalXL!==t.breakpointVerticalXL},it=e=>{var t=e.prevProps,n=e.props;return n.breakpointHorizontalM!==t.breakpointHorizontalM},ot=e=>{var t=e.queueIsHidden,n=e.queueIsCollapsed,i=e.queueIsExpanding,o=e.queueCurrentIndex,a=e.index;return!t&&(!n&&(!i&&a!==o))},at=e=>{var t=e.interactionModeCurrentIsTouch,n=e.queueTransition,i=e.queueVariant;return!t&&(n!==P.b&&i!==P.b)},rt=Ye,st=e=>{var t=e.queueVariant,n=e.queueTransition,i=e.left;return n?{transform:"translate3d(".concat(Math.round(n.left),"px, 0, 0)"),"transition-duration":"".concat(n.duration,"ms"),background:"rgba(0,0,0,".concat(lt({queueTransition:n}),")")}:{transform:"translate3d(".concat(Math.round(i),"px, 0, 0)"),"transition-duration":"0ms",background:"rgba(0,0,0,".concat(ut({queueVariant:t}),")")}},ut=e=>{var t=e.queueVariant;return t===P.b?.7:0},lt=e=>{var t=e.queueTransition;return t.variant===P.b?.7:0},dt=n("L7yA"),ct=n("zQIM"),pt=n("xWyM"),ht=n("RmHj"),gt=n("/2Bx"),mt=n("D71v"),vt=n("RHGV"),bt=n("lLiM"),ft=n("XgKk"),It=n("61Dg"),xt=n("BY5m"),yt="queueAnimation",qt=500,Qt=5e3,Pt=H.default.get("queue"),Ot=e=>{var t=e.immediateTransition,n=e.fromVariant,i=e.toVariant,o=e.fromReason,a=e.toReason;n!==i?Pt.log("".concat(t?"immediate":"progressive"," variant transition from ").concat(n," to ").concat(i," because ").concat(a)):Pt.log("".concat(t?"immediate":"progressive"," reason transition from ").concat(o," to ").concat(a))},St=()=>"",Tt=e=>e.settingsControls?Nt(e)?{variant:P.c,reason:"advertising-is-playing"}:zt(e)?{variant:P.c,reason:"player-too-small"}:_t(e)&&!e.queueShowOnStartScreen?{variant:P.c,reason:"start-screen"}:null:{variant:P.c,reason:"controls-disabled"},At=e=>{var t=Tt(e);return t||(Ft(e)?{variant:P.a,reason:"alert-dialog-displayed"}:_t(e)&&e.queueShowOnStartScreen?{variant:P.a,reason:"start-screen"}:Rt(e)?{variant:P.a,reason:"end-screen"}:e.controlsPresent?{variant:P.a,reason:"controls-present",duration:500}:null)},jt=e=>{var t=e.prevProps,n=e.props,i=e.component,o=e.willAutoCollapseAfterVideoLoad,a=e.controlsPresentBeforeAutoExpand,r=Tt(n);if(r){if("player-too-small"!==r.reason||!n.breakpointHorizontalXS)return r;if(!Mt({prevProps:t,props:n,willAutoCollapseAfterVideoLoad:o}))return r.duration=500,r}if(Gt(t,n)){i.props.onDraggingStart();var s=i.computeLeftWhenPointerStartsDragging();return{variant:i.computeVariantWhenPointerStartsDragging(),reason:"pointer-starts-dragging",left:s,state:{leftOnStartDragging:s}}}if(Zt(t,n)){var u=i.computeLeftWhenDragging();return{variant:i.computeVariantWhenPointerIsDragging(),reason:"pointer-is-dragging",left:u}}if(Kt(t,n)){i.props.onDraggingEnd();var l=i.computeVariantWhenPointerEndsDragging();return l===P.a&&(l=Dt({props:n,willAutoCollapseAfterVideoLoad:o,controlsPresentBeforeAutoExpand:a})),{variant:l,reason:"pointer-ends-dragging",duration:500}}return $t(t,n)&&"metadata-are-null"!==n.controlsAbsenceReason&&"queue-is-active"!==n.controlsAbsenceReason&&"alert-dialog-is-displayed"!==n.controlsAbsenceReason&&!Mt({prevProps:t,props:n,willAutoCollapseAfterVideoLoad:o})?{variant:P.c,reason:"controls-becomes-hidden",duration:500}:!Jt(t,n)||_t(n)||Rt(n)||Ft(n)||Mt({prevProps:t,props:n,willAutoCollapseAfterVideoLoad:o})||n.activeElementIsAControl||n.activeInteractionIsKeyboard&&n.activeElementIsInsideQueue?wt(t,n)&&n.controlsPresent&&!Yt(n)&&!o?{variant:P.a,reason:"video-starts-playing-for-the-first-time",duration:500}:Vt(t,n)?{variant:P.b,reason:"up-next-becomes-displayed",duration:500,state:{controlsPresentBeforeAutoExpand:n.controlsPresent}}:Wt(t,n)?{variant:P.a,reason:"alert-dialog-becomes-displayed",duration:500}:Xt(t,n)?{variant:P.a,reason:"enters-end-screen",duration:500}:Ut(t,n)?{variant:P.a,reason:"player-becomes-large-enough",duration:500}:Bt(t,n)&&!n.queueIsCollapsing?{variant:P.a,reason:"controls-becomes-visible",duration:500}:Ht(t,n)&&n.controlsPresent?{variant:P.a,reason:"advertising-stops-playing",duration:500}:Ct(t,n)&&n.activeInteractionIsKeyboard?{variant:P.b,reason:"focus",duration:500}:!Et(t,n)||!t.activeInteractionIsKeyboard||n.queueIsHidden||i.state.transition&&"escape"===i.state.transition.reason?!t.sequenceIsLoadingNext&&n.sequenceIsLoadingNext&&n.queueIsCollapsed&&!n.pointerIsOnPlayer?{variant:P.c,reason:"hide-on-autonext",duration:500}:null:{variant:P.a,reason:"blur",duration:0}:{variant:P.c,reason:"pointer-leaves-player",duration:500}},Dt=e=>{var t=e.props,n=e.controlsPresentBeforeAutoExpand,i=e.willAutoCollapseAfterVideoLoad;return Lt(t)?n?P.a:P.c:t.sequenceIsPreparingNext||t.sequenceIsLoadingNext||i?P.c:P.a},Mt=e=>{var t=e.prevProps,n=e.props,i=e.willAutoCollapseAfterVideoLoad;return Lt(t)||Lt(n)||n.sequenceIsPreparingNext||i},Ct=(e,t)=>!e.activeElementIsInsideQueue&&t.activeElementIsInsideQueue,Et=(e,t)=>e.activeElementIsInsideQueue&&!t.activeElementIsInsideQueue,kt=e=>{var t=e.controlsPresent;return!t},_t=e=>{var t=e.isStartScreen;return t},wt=(e,t)=>!e.playbackHasPlayedOnce&&t.playbackHasPlayedOnce,Lt=e=>{var t=e.isQueueAutoplayEnabled,n=e.queueCurrentItemIsLast,i=e.isUpNextDisplayed;return!!t&&(!n&&i)},Vt=(e,t)=>!Lt(e)&&Lt(t),Nt=e=>{var t=e.adLinearIsRunning,n=e.IVVIsRunning;return t||n},Ht=(e,t)=>Nt(e)&&!Nt(t),Ft=e=>{var t=e.isAlertDialogDisplayed;return t},Wt=(e,t)=>!Ft(e)&&Ft(t),Rt=e=>{var t=e.isEndScreen;return t},Xt=(e,t)=>!Rt(e)&&Rt(t),zt=e=>{var t=e.breakpointHorizontalS;return!t},Ut=(e,t)=>zt(e)&&!zt(t),$t=(e,t)=>!kt(e)&&kt(t),Bt=(e,t)=>kt(e)&&!kt(t),Gt=(e,t)=>!e.isDragging&&t.isDragging,Zt=(e,t)=>t.isDragging,Kt=(e,t)=>e.isDragging&&!t.isDragging,Jt=(e,t)=>e.pointerIsOnPlayer&&!t.pointerIsOnPlayer,Yt=e=>{var t=e.activeElementIsInsideQueue,n=e.activeInteractionIsKeyboard;return t&&n};class en extends h.Component{render(e){return Object(h.h)(rt,e)}}var tn=Object(m.connect)(Ge,Ze)(d(en)),nn=n("5+HO"),on=e=>{class t extends h.Component{componentDidUpdate(e){var t=this.props;!e.dataSlider.startSliding&&t.dataSlider.startSliding&&t.onDragGestureStart(),!e.dataSlider.endSliding&&t.dataSlider.endSliding&&t.onDragGestureEnd()}render(t){var n=t.dataSlider,i=t.dataDrag,o=p()(t,["dataSlider","dataDrag"]);return Object(h.h)(e,w()({isDragging:n.isSliding,offsetX:i.offsetX},o))}}return Object(nn.b)(t,{relativeSliding:()=>!0,preventVerticalScroll:()=>!1,preventHorizontalScroll:!0})};class an extends h.Component{render(e){return Object(h.h)(rt,e)}}var rn=Object(g.compose)(Object(m.connect)(Ge,Ze),on)(d(an)),sn=n("W1we"),un='    query playerQueueQuery($videoId:String!,$page:Int!,$videoPerPage:Int!){player(videoXid:$videoId){queue{hasAutoPlayNext name videos(page:$page,first:$videoPerPage){edges{node{...fields}}}}}video(xid:$videoId){...fields}}fragment fields on Video{title xid duration thumbnailURL(size:"x120")}',ln='query playerQueueQuery($videoId:String!,$page:Int!,$videoPerPage:Int!){player(videoXid:$videoId){queue{hasAutoPlayNext name videos(page:$page,first:$videoPerPage){edges{node{...fields}}}}}}fragment fields on Video{title xid duration thumbnailURL(size:"x120")}',dn=' query playerPlaylistQueueQuery($playlistId:String!,$page:Int!,$videoPerPage:Int!){collection(xid:$playlistId){name videos(page:$page,first:$videoPerPage){edges{node{...fields}}}}}fragment fields on Video{title xid duration thumbnailURL(size:"x120")}',cn=n("VfPQ"),pn=H.default.get("Queue"),hn=10,gn=30,mn={},vn=!1,bn,fn={cancel:()=>{vn&&bn&&(bn.cancel(),bn=void 0)},toCancelToken:()=>{fn.cancel(),vn=!0;var e=Object(sn.b)();return bn=e,e.token},stop:()=>{vn=!1,bn=void 0}},In=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sn.d,o=10,a,r="video_".concat(t),s="".concat(n,"_").concat(o);return mn.requested===r&&s in mn?a=Promise.resolve(mn[s]):(mn.requested!==r&&(mn={}),a=i({name:"playerQueueQuery",query:1===n?un:ln,variables:{videoId:t,page:n,videoPerPage:o},cancelToken:fn.toCancelToken()})),a.finally(()=>{fn.stop()}).then(e=>{mn.requested=r,mn[s]=e;var t=e.player.queue.videos.edges.map(e=>{var t=e.node;return t});return{name:e.player.queue.name,hasAutoPlayNext:e.player.queue.hasAutoPlayNext,videos:1===n?[e.video,...t]:t,isLastPage:t.length<o}})},xn=function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sn.d,a=30,r=-1,s,u="playlist_".concat(t),l="".concat(n,"_").concat(a);return mn.requested===u&&l in mn?s=Promise.resolve(mn[l]):(mn.requested!==u&&(mn={}),s=o({name:"playerPlaylistQueueQuery",query:dn,variables:{playlistId:t,page:n,videoPerPage:a},cancelToken:fn.toCancelToken()})),s.finally(()=>{fn.stop()}).then(e=>{mn.requested=u,mn[l]=e;var t=e.collection.videos.edges.map((e,t)=>{var n=e.node;return n.xid===i.xid&&(r=t),n});return 1===n&&(-1!==r&&t.splice(r,1),t.unshift(i)),{name:e.collection.name,hasAutoPlayNext:!0,videos:t,isLastPage:t.length<a}})},yn=(e,t)=>{var n=t.started,i=t.ended,o=t.canceled,a=t.errored;n(),e.then(i,e=>{e&&e.type===sn.a?o():a(e)})},qn=e=>{var t=Object(F.a)({metadataAccessId:cn.b,metadataPosters:cn.D,metadataDuration:cn.i,metadataTitle:cn.S,queuePage:T.n,queueIsLastPage:T.i,queueNextPageRequested:T.m,queueSourceType:T.s,queueSourceXid:T.u,queueHasPlaylistIdNotFoundError:T.h}),n=e=>{var t=t=>{e(Object(S.k)(t))},n=()=>{e(Object(S.h)())},i=t=>{"not_found"===t.type?e(Object(S.l)({error:t.message})):e(Object(S.j)({error:t.message}))},o=t=>{e(Object(S.i)(t))};return{started:t,canceled:n,errored:i,ended:o}},i;class o extends h.Component{load(e){var t=this.props,n=t.queueSourceType,o=1===e?{duration:t.metadataDuration,thumbnailURL:t.metadataPosters[120],title:t.metadataTitle,xid:t.metadataAccessId}:i,a;if(i=o,"playlist"===n){var r=t.queueSourceXid;a=r}else a=i.xid;var s={started:()=>{pn.log("queue load started",{accessId:a,page:e,queueSourceType:n}),t.started({page:e})},canceled:()=>{pn.log("queue load cancelled",{accessId:a,page:e,queueSourceType:n}),t.canceled()},errored:i=>{pn.error("queue load errored",{accessId:a,page:e,queueSourceType:n},i.message),t.errored(i)},ended:i=>{pn.log("queue load ended",{accessId:a,page:e,queueSourceType:n},i),t.ended(i)}};yn("playlist"===n?xn(a,e,i):In(a,e),s)}componentDidMount(){var e=this.props;-1===e.queuePage&&e.metadataAccessId?this.load(1):e.queueNextPageRequested&&!e.queueIsLastPage&&this.load(e.queuePage+1)}componentDidUpdate(e){var t=this.props;if(-1===t.queuePage&&!e.metadataAccessId&&t.metadataAccessId)pn.log("Loading queue page 1"),this.load(1);else if(e.queueNextPageRequested||!t.queueNextPageRequested||t.queueIsLastPage)!e.queueHasPlaylistIdNotFoundError&&t.queueHasPlaylistIdNotFoundError&&"auto"!==t.queueSourceType&&(pn.warn("Retrying loading queue with sourceType=".concat(t.queueSourceType)),this.load(1));else{var n=t.queuePage+1;pn.log("Loading queue page ".concat(n)),this.load(n)}}componentWillUnmount(){fn.cancel()}render(t){return Object(h.h)(e,t)}}return Object(m.connect)(t,n)(o)},Qn=Object(v.createStructuredSelector)({isQueueAttached:b.a,interactionModeCurrentIsTouch:mt.b}),Pn=e=>{var t=e.isQueueAttached,n=e.interactionModeCurrentIsTouch,i=p()(e,["isQueueAttached","interactionModeCurrentIsTouch"]);return t?n?Object(h.h)(rn,i):Object(h.h)(tn,i):null},On=Object(g.compose)(Object(m.connect)(Qn),qn)(Pn),Sn=n("HfA1"),Tn=n.n(Sn),An=[{cssText:Tn.a,styleId:"dmp-async-style-queue"}]},HfA1:function(e,t,n){var i=n("JPst");t=i(!1),t.push([e.i,'.np_DialogQueue-list-item{display:block}.np_DialogQueue-item{background:none;border:0 none;color:#fff;cursor:pointer;display:flex;flex-direction:column;position:relative;text-align:left;width:100%}.np_DialogQueue-item-shadow{background:linear-gradient(to bottom, transparent 0%, #000 120%);border-radius:1px;display:block;opacity:0;pointer-events:none;position:absolute;transition:opacity 650ms}.np_DialogQueue-label{font-size:14px;position:absolute;transition:opacity 350ms;z-index:1}.np_DialogQueue-item .np_DialogQueue-label{font-weight:500}.np_DialogQueue-label--now{color:#56c7ff}.np_DialogQueue-item-duration{font-size:10px;position:absolute;right:26px;z-index:1}.np_DialogQueue-item-title{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:block;display:-webkit-box;font-size:12px;line-height:1.2;max-height:28.8px;overflow:hidden;text-overflow:ellipsis;white-space:initial;margin:5px 0 0;order:1}.np_DialogQueue-item-image{border:1px solid #fff;border-radius:2px;object-fit:cover;transition:border 350ms, box-shadow 350ms}.np_DialogQueue-item--autonext .np_DialogQueue-item-image{animation:pulseBorder 2s infinite}@keyframes pulseBorder{0%{border-color:transparent}50%{border-color:#fff}100%{border-color:transparent}}.np_Queue{height:100%;position:absolute;width:180px}.dmp_h-min-m .np_Queue{width:265px}.np_DialogQueue{background:none;bottom:0;display:flex;flex-direction:column;left:0;position:absolute;right:0;top:0;transform:translate3d(40px, 0, 0);transition:transform, background}.np_DialogQueue::after{background:linear-gradient(to bottom, transparent 0%, #000 140%);bottom:0;content:" ";display:block;height:40px;left:0;opacity:0;pointer-events:none;position:absolute;transition:all 500ms;width:100%}.dmp_h-min-m .np_DialogQueue::after{height:60px}.np_DialogQueue--expanded::after{opacity:1}.np_DialogQueue-header{align-items:center;background:rgba(0,0,0,0.9);display:flex;left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity 350ms;z-index:2}.np_DialogQueue--expanded .np_DialogQueue-header{opacity:1}.np_DialogQueue-title{-webkit-box-orient:vertical;-webkit-line-clamp:2;display:block;display:-webkit-box;font-size:14;line-height:1.2;max-height:33.6;overflow:hidden;text-overflow:ellipsis;white-space:initial;padding:0 15px}.dmp_h-min-s .np_DialogQueue-title{padding:0 15px}.dmp_h-min-m .np_DialogQueue-title{padding:0 20px}.np_skip{background:rgba(0,0,0,0.9);left:0;opacity:0;padding:10px;position:absolute;top:0}.np_skip:focus{opacity:1;z-index:2}.np_DialogQueue-body{flex:1 1 auto;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;margin-right:-20px;padding-right:20px}.np_DialogQueue-list,.np_DialogQueue-list-item{margin:0;padding:0}.np_DialogQueue-list-item{display:block}\n',""]),e.exports=t}}]);