(this.dmpJsonp=this.dmpJsonp||[]).push([["chromecast"],{ElS5:function(e,t,i){"use strict";function s(){this.startTimer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;this.timer||(B.log("Start timer"),this.timer=setInterval(e,t))},this.stopTimer=function(){this.timer&&(B.log("Stop timer"),clearInterval(this.timer),this.timer=null)},this.onSessionCreated=function(e,t){B.log("Session created",t),this.session=t,this.trigger(P.a.CHROMECAST_SESSION_AVAILABLE,{device:this.session.receiver.friendlyName}),this.trigger(P.a.CHROMECAST_REMOTE_SCREEN_DISPLAYED),this.session.addMediaListener(this.stopSession),this.session.addUpdateListener(this.onSessionUpdated),this.loadMedia()},this.onSessionUpdated=function(e){B.log("Session updated and ".concat(e?"":"not ","alive")),e?this.onVolumeChanged():this.stopSession()},this.onMediaDiscovered=function(e){B.log("Media loaded successfully",e),this.media=e,this.bindEventListeners(),this.onMediaStatusUpdate(),this.media.removeUpdateListener(this.onMediaStatusUpdate),this.media.addUpdateListener(this.onMediaStatusUpdate),this.session&&this.session.receiver&&null!=this.session.receiver.volume&&(this.mediaInfo.volume={volume:this.session.receiver.volume.level,muted:this.session.receiver.volume.muted}),this.trigger(P.a.CHROMECAST_REMOTE_ENABLED)},this.onVolumeChanged=function(){this.mediaInfo.volume=this.mediaInfo.volume||{};var e=this.mediaInfo.volume,t=e.volume,i=e.muted,s=this.session.receiver.volume,a=s.level,n=s.muted;t===a&&i===n||(this.mediaInfo.volume.volume=a,this.mediaInfo.volume.muted=n,this.trigger(P.a.VIDEO_VOLUME_CHANGED,{volume:this.mediaInfo.volume.volume,muted:this.mediaInfo.volume.muted,origin:this.session.receiver.friendlyName}))},this.onMediaStatusUpdate=function(){var e=()=>{var e=this.media.getEstimatedTime();e!==this.mediaInfo.currentTime&&(this.mediaInfo.currentTime=e,this.trigger(P.a.VIDEO_TIME_UPDATE,{time:e}))};if(!this.lastPlayerState||this.media.playerState!==this.lastPlayerState){switch(B.log("MediaStatusUpdate",this.media.playerState),this.lastPlayerState=this.media.playerState,this.media.playerState){case q.cast.media.PlayerState.PLAYING:this.startTimer(e);break;case q.cast.media.PlayerState.PAUSED:case q.cast.media.PlayerState.BUFFERING:this.stopTimer();break;case q.cast.media.PlayerState.IDLE:this.stopTimer(),this.lastPlayerState=null,this.media.removeUpdateListener(this.onMediaStatusUpdate)}this.trigger(P.a.CHROMECAST_MEDIA_STATUS_UPDATE,{streamStatus:this.media.playerState})}},this.requestSession=function(){q.cast.requestSession(e=>{B.log("cast.requestSession()"),this.onSessionCreated(null,e)},e=>{switch(B.log("cast.requestSession() error:",e),e.code){case q.cast.ErrorCode.CANCEL:this.trigger(P.a.CHROMECAST_USER_CANCEL,e);break;default:this.stopSession()}})},this.setVolume=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.session&&(e!==this.session.receiver.volume.level&&this.session.setReceiverVolumeLevel(e,()=>B.log("session.setReceiverVolumeLevel()"),e=>B.log("session.setReceiverVolumeLevel() error:",e)),t!==this.session.receiver.volume.muted&&this.session.setReceiverMuted(t,()=>B.log("session.setReceiverMuted()"),e=>B.log("session.setReceiverMuted() error:",e)))},this.stopSession=function(){this.session.stop(()=>B.log("session.stop()"),e=>B.log("session.stop() error:",e)),this.session.removeMediaListener(this.stopSession),this.session.removeUpdateListener(this.onSessionUpdated),this.unbindEventListeners(),this.trigger(P.a.CHROMECAST_SESSION_STOPPED,this.mediaInfo),this.stopTimer(),this.media=null,this.session=null},this.loadMedia=function(){var e=e=>"recorded"===e?q.cast.media.StreamType.BUFFERED:"live"===e?q.cast.media.StreamType.LIVE:q.cast.media.StreamType.OTHER;if(this.mediaInfo.src){var t=new q.cast.media.MovieMediaMetadata;t.metadataType=q.cast.media.MetadataType.MOVIE,t.title=this.mediaInfo.title,t.images=[new q.cast.Image(this.mediaInfo.posterUrl)];var i=new q.cast.media.MediaInfo(this.mediaInfo.src,this.mediaInfo.contentType);i.metadata=t,i.duration=this.mediaInfo.duration,i.contentType=this.mediaInfo.contentType,i.xid=this.mediaInfo.xid,i.quality=this.mediaInfo.quality,i.streamType=e(this.mediaInfo.streamType);var s=new q.cast.media.LoadRequest(i);s.autoplay=this.mediaInfo.autoplay,s.currentTime=this.mediaInfo.currentTime,s.sessionId=this.session.sessionId,this.session.loadMedia(s,this.onMediaDiscovered,e=>{B.log("session.loadMedia() error:",e),this.stopSession()})}},this.handleMediaStatusUpdates=function(){switch(this.media.playerState){case q.cast.media.PlayerState.PAUSED:this.trigger(P.a.VIDEO_PAUSE);break;case q.cast.media.PlayerState.PLAYING:this.trigger(P.a.VIDEO_PLAYING);break;case q.cast.media.PlayerState.BUFFERING:this.trigger(P.a.VIDEO_WAITING);break;case q.cast.media.PlayerState.IDLE:k.log("Idle for reason: ".concat(this.media.idleReason)),this.trigger(P.a.VIDEO_PAUSE),this.media.idleReason===q.cast.media.IdleReason.FINISHED&&0!==this.mediaInfo.currentTime&&this.trigger(P.a.VIDEO_ENDED)}},this.handlePlayRequestedEvent=function(){this.trigger(P.a.VIDEO_PLAY),this.media.play(null,()=>B.log("media.play()"),e=>B.log("media.play() error:",e))},this.handlePauseRequestedEvent=function(){this.media.pause(null,()=>B.log("media.pause()"),e=>B.log("media.pause() error:",e))},this.handleTogglePlaybackRequestedEvent=function(){this.media.playerState!==q.cast.media.PlayerState.PLAYING?this.trigger(P.a.PLAY_REQUESTED,{interactionType:O.c}):this.trigger(P.a.PAUSE_REQUESTED,{interactionType:O.c})},this.handleSeekRequested=function(e,t){var i=t.time;this.mediaInfo.currentTime=i,this.trigger(P.a.VIDEO_SEEKING,{time:i}),this.stopTimer();var s=new q.cast.media.SeekRequest;s.currentTime=i,this.media.seek(s,()=>{B.log("media.seek()"),this.trigger(P.a.VIDEO_SEEKED,{time:i})},e=>B.log("media.seek() error:",e))},this.updateVolume=function(e,t){var i=this.muted&&e!==this.volume;this.setVolume(e,!i&&t)},this.handleVolumeChangeRequestedEvent=function(e,t){var i=t.volume,s=t.muted,a=t.internal,n=t.interactionType,o="number"==typeof i?Math.max(0,Math.min(i,1)):void 0;this.volumeInternalSet=!!a,this.volumeInteractionType=n,this.updateVolume(o,s)},this.bindEventListeners=function(){this.on(P.a.PLAY_REQUESTED,this.handlePlayRequestedEvent),this.on(P.a.PAUSE_REQUESTED,this.handlePauseRequestedEvent),this.on(P.a.TOGGLE_PLAYBACK_REQUESTED,this.handleTogglePlaybackRequestedEvent),this.on(P.a.SEEK_REQUESTED,this.handleSeekRequested),this.on(P.a.VOLUME_CHANGE_REQUESTED,this.handleVolumeChangeRequestedEvent),this.on(P.a.CHROMECAST_MEDIA_STATUS_UPDATE,this.handleMediaStatusUpdates)},this.unbindEventListeners=function(){this.off(P.a.PLAY_REQUESTED,this.handlePlayRequestedEvent),this.off(P.a.PAUSE_REQUESTED,this.handlePauseRequestedEvent),this.off(P.a.TOGGLE_PLAYBACK_REQUESTED,this.handleTogglePlaybackRequestedEvent),this.off(P.a.SEEK_REQUESTED,this.handleSeekRequested),this.off(P.a.VOLUME_CHANGE_REQUESTED,this.handleVolumeChangeRequestedEvent),this.off(P.a.CHROMECAST_MEDIA_STATUS_UPDATE,this.handleMediaStatusUpdates)},this.setMediaInfo=function(){k.log("Settings mediaInfo");var e=m.a.metadata("posters");this.mediaInfo={xid:m.a.metadata("id"),title:m.a.metadata("title"),posterUrl:e?e[120]:null,duration:m.a.metadata("duration"),autoplay:!0,currentTime:this.startAt};var t=m.a.metadata("qualities.auto",null),i=t?t[0].url:null;null!=i&&(this.mediaInfo.src=i,this.mediaInfo.hls=!0,this.mediaInfo.contentType=L.a.HLS,k.log("Found HLS:",this.mediaInfo.src),this.mediaInfo.streamType=m.a.metadata("stream_type"))},this.onLoadVideo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startAt=t&&t.start||0},this.onVideoSelected=function(){if(this.setMediaInfo(),this.session){if("live"===m.a.metadata("stream_type"))return void this.stopSession();this.trigger(P.a.CHROMECAST_REMOTE_SCREEN_DISPLAYED),this.unbindEventListeners(),this.loadMedia()}},this.onVideoTimeUpdate=function(e,t){this.mediaInfo.currentTime=t.time},this.onVideoVolumeChanged=function(e,t){this.session&&t.origin===(this.session&&this.session.receiver.friendlyName)||(this.mediaInfo.volume=t)},this.onVideoPlay=function(){this.mediaInfo.autoplay=!0},this.onVideoPause=function(){this.mediaInfo.autoplay=!1},this.onVideoSlotStarted=function(){Object(N.b)(this,P.a.VIDEO_DURATION_CHANGE,{duration:this.mediaInfo.duration})},this.after("initialize",function(){k.log("Initializing"),this.mediaInfo={},this.timer=null,this.session=null,this.media=null,this.startAt=0,this.lastPlayerState=null,this.onMediaStatusUpdate=this.onMediaStatusUpdate.bind(this),this.onMediaDiscovered=this.onMediaDiscovered.bind(this),this.onSessionCreated=this.onSessionCreated.bind(this),this.onSessionUpdated=this.onSessionUpdated.bind(this),this.stopSession=this.stopSession.bind(this),this.setMediaInfo(),this.on(P.a.LOAD_VIDEO,this.onLoadVideo),this.on(P.a.VIDEO_SELECTED,this.onVideoSelected),this.on(P.a.VIDEO_TIME_UPDATE,this.onVideoTimeUpdate),this.on(P.a.VIDEO_VOLUME_CHANGED,this.onVideoVolumeChanged),this.on(P.a.VIDEO_PLAY,this.onVideoPlay),this.on(P.a.VIDEO_PAUSE,this.onVideoPause),this.on(P.a.VIDEO_SLOT_STARTED,this.onVideoSlotStarted),this.on(P.a.CHROMECAST_LAUNCH_REQUESTED,this.requestSession),this.on(P.a.CHROMECAST_READY,()=>{this.on(P.a.CHROMECAST_SESSION_CREATED,this.onSessionCreated)})})}i.r(t),i.d(t,"__EXPORTED_CSS__",function(){return Q}),i.d(t,"ButtonChromecast",function(){return V}),i.d(t,"Chromecast",function(){return H});var a=i("2mXy"),n=i("rpLO"),o=i("vGkh"),r=i("+kBE"),h=i("iiVM"),d=i("6kjv"),l=i("ZJNx"),m=i("i/kS"),c=i("/MKj"),u=i("peh1"),f=i("zmjU"),E=i("VfPQ"),v=i("9GI1"),S=!1,p=i("N2cw").injectSvgSymbol,g=function(){var e="dmp_Chromecast";return S||(p('<symbol viewBox="0 0 24 24"><circle fill="var(--wave1)" cx="2" cy="20" r="1"/><path fill="var(--wave2)" d="M1.8 17.08a1 1 0 01.4-1.96 6 6 0 014.68 4.68 1 1 0 01-1.96.4 4 4 0 00-3.12-3.12z"/><path fill="var(--wave3)" d="M1.89 13.044a1 1 0 11.22-1.988 10 10 0 018.834 8.833 1 1 0 01-1.988.222 8 8 0 00-7.066-7.067z"/><path fill="var(--frame)" d="M3 8a1 1 0 11-2 0V6a3 3 0 013-3h16a3 3 0 013 3v12a3 3 0 01-3 3h-6a1 1 0 010-2h6a1 1 0 001-1V6a1 1 0 00-1-1H4a1 1 0 00-1 1v2z"/></symbol>',e,"dmp_svg_sprites"),S=!0),e},I=!1,_=i("N2cw").injectSvgSymbol,T=function(){var e="dmp_Chromecast-Filled";return I||(_('<symbol viewBox="0 0 24 24"><path fill="currentColor" d="M2 21a1 1 0 110-2 1 1 0 010 2zm-.2-3.92a1 1 0 01.4-1.96 6 6 0 014.68 4.68 1 1 0 01-1.96.4 4 4 0 00-3.12-3.12zm.09-4.036a1 1 0 11.22-1.988 10 10 0 018.834 8.833 1 1 0 01-1.988.222 8 8 0 00-7.066-7.067zM3 8a1 1 0 11-2 0V6a3 3 0 013-3h16a3 3 0 013 3v12a3 3 0 01-3 3h-6a1 1 0 010-2h6a1 1 0 001-1V6a1 1 0 00-1-1H4a1 1 0 00-1 1v2zm9.387 9A12.072 12.072 0 005 9.613V8a1 1 0 011-1h12a1 1 0 011 1v8a1 1 0 01-1 1h-5.613z"/></symbol>',e,"dmp_svg_sprites"),I=!0),e},y=Object(u.createSelector)([E.M,n.b,f.h,l.c,v.d],(e,t,i,s,a)=>!a&&(!1!==s&&(!(!t||!i)&&(!e||m.a.isGKEnabled("PV5_CHROMECAST_LIVE_STREAM_ENABLE"))))),C=Object(u.createSelector)([n.c,n.a],(e,t)=>e?h.a.__("neon:::Playing on %device%",{device:t}):h.a.__("neon:::Play on a TV")),A=Object(u.createSelector)([n.c],e=>e?T:g),M=Object(u.createSelector)([n.e,n.f,n.d],(e,t,i)=>e?"np_ButtonChromecast":t?"np_ButtonChromecast--pressed":i?"np_ButtonChromecast--connecting":"np_ButtonChromecast--active"),R=e=>({isAttached:y(e),isIdle:Object(n.e)(e),tooltip:C(e),Icon:A(e),cssState:M(e),isConnecting:Object(n.d)(e)}),D=e=>({onClick:()=>e(Object(o.f)())}),U=e=>{var t=e.isAttached,i=e.isIdle,s=e.tooltip,n=e.cssState,o=e.onClick,h=e.Icon;return t?Object(a.h)(r.a,{"aria-pressed":i?"false":"true","aria-label":s,title:s,className:"np_button np_ButtonChromecast ".concat(n),onClick:o},Object(a.h)(d.a,{Icon:h})):null},V=Object(c.connect)(R,D)(U),O=i("cGXy"),P=i("znKg"),L=i("z/W+"),w=i("Zrx9"),b=i("yTBV"),N=i("cWgo"),k=w.default.get("Sender"),B=w.default.get("Google API"),q=window.chrome,H=Object(b.component)(s),G=i("lu9k"),j=i.n(G),Q=[{cssText:j.a,styleId:"dmp-async-style-chromecast"}]},lu9k:function(e,t,i){var s=i("JPst");t=s(!1),t.push([e.i,"@keyframes wavein{0%{--wave1: #56c7ff;--wave2: #fff;--wave3: #fff;--frame: #56c7ff}50%{--wave1: #fff;--wave2: #56c7ff;--wave3: #fff;--frame: #56c7ff}100%{--wave1: #fff;--wave2: #fff;--wave3: #56c7ff;--frame: #56c7ff}}@keyframes highlight-wavein{0%{--wave1: rgba(255,255,255,0.4);--wave2: #fff;--wave3: #fff;--frame: #fff}50%{--wave1: #fff;--wave2: rgba(255,255,255,0.4);--wave3: #fff}100%{--wave1: #fff;--wave2: #fff;--wave3: rgba(255,255,255,0.4)}}.np_ButtonChromecast{--wave1: #fff;--wave2: #fff;--wave3: #fff;--frame: #fff}.np_ButtonChromecast svg{width:22px}.np_ButtonChromecast--pressed{--wave1: #56c7ff;--wave2: #56c7ff;--wave3: #56c7ff;--frame: #56c7ff}.np_ButtonChromecast--connecting{animation:wavein 1s linear 0s infinite alternate}.np_ButtonChromecast--active{color:#56c7ff}.np_MainNeon--highlight .np_ButtonChromecast--pressed{--wave1: #fff;--wave2: #fff;--wave3: #fff;--frame: #fff}.np_MainNeon--highlight .np_ButtonChromecast--connecting{animation-name:highlight-wavein}.np_MainNeon--highlight .np_ButtonChromecast--active{color:#fff}\n",""]),e.exports=t}}]);